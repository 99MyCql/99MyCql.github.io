<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/golang32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/golang16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="baidu-site-verification" content="code-RpvRDWfflk">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.dounine.live","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"right","display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"utterances","storage":true,"lazyload":false,"nav":null,"activeClass":"utterances"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="[TOC] 0. 前言鉴于实习中经常使用 shell 语言，因此趁此机会好好学习一下“强大”的 shell 语言。">
<meta property="og:type" content="article">
<meta property="og:title" content="shell学习笔记">
<meta property="og:url" content="https://blog.dounine.live/shell%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html">
<meta property="og:site_name" content="dounine&#39;s blog">
<meta property="og:description" content="[TOC] 0. 前言鉴于实习中经常使用 shell 语言，因此趁此机会好好学习一下“强大”的 shell 语言。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2021-04-25T07:59:05.000Z">
<meta property="article:modified_time" content="2021-04-25T07:59:05.000Z">
<meta property="article:author" content="dounine">
<meta property="article:tag" content="Shell">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://blog.dounine.live/shell%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.dounine.live/shell%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html","path":"shell学习笔记.html","title":"shell学习笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>shell学习笔记 | dounine's blog</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?66c7065aa71681df47eb23eff557978b"></script>




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">dounine's blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">18</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">48</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">75</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#0-%E5%89%8D%E8%A8%80"><span class="nav-text">0. 前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E7%AE%80%E4%BB%8B"><span class="nav-text">1. 简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="nav-text">2. 使用命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%8F%98%E9%87%8F"><span class="nav-text">3. 变量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="nav-text">定义变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%8F%98%E9%87%8F"><span class="nav-text">使用变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%8F%98%E9%87%8F%E5%80%BC"><span class="nav-text">修改变量值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%8F%98%E9%87%8F"><span class="nav-text">删除变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-text">环境变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AA%E8%AF%BB%E5%8F%98%E9%87%8F"><span class="nav-text">只读变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E9%87%8F%E9%BB%98%E8%AE%A4%E5%80%BC"><span class="nav-text">变量默认值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E5%8F%98%E9%87%8F"><span class="nav-text">特殊变量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-text">4. 字符串</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E6%95%B0%E7%BB%84"><span class="nav-text">5. 数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E6%95%B0%E7%BB%84"><span class="nav-text">定义数组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%BD%E5%8A%A0"><span class="nav-text">追加</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%95%B0%E7%BB%84"><span class="nav-text">使用数组</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E8%BF%90%E7%AE%97%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">6. 运算表达式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97"><span class="nav-text">算术运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="nav-text">位运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%BB%E8%BE%91%E8%BF%90%E7%AE%97"><span class="nav-text">逻辑运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B5%8B%E5%80%BC%E8%BF%90%E7%AE%97"><span class="nav-text">赋值运算</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD-if"><span class="nav-text">7. 条件判断 if</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#test"><span class="nav-text">test</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%96%87%E4%BB%B6%E5%88%A4%E6%96%AD"><span class="nav-text">1) 文件判断</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%88%A4%E6%96%AD"><span class="nav-text">2) 字符串判断</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E6%95%B4%E6%95%B0%E5%88%A4%E6%96%AD"><span class="nav-text">3) 整数判断</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#4-%E9%80%BB%E8%BE%91%E5%88%A4%E6%96%AD"><span class="nav-text">4) 逻辑判断</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E7%AE%97%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">运算表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%99%AE%E9%80%9A%E5%91%BD%E4%BB%A4"><span class="nav-text">普通命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-case"><span class="nav-text">8. case</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-%E5%BE%AA%E7%8E%AF"><span class="nav-text">9. 循环</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#while"><span class="nav-text">while</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#until"><span class="nav-text">until</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#for"><span class="nav-text">for</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#continue"><span class="nav-text">continue</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#10-%E5%87%BD%E6%95%B0"><span class="nav-text">10. 函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%82%E6%95%B0"><span class="nav-text">参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#return"><span class="nav-text">return</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#local-%E5%B1%80%E9%83%A8%E5%8F%98%E9%87%8F"><span class="nav-text">local 局部变量</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E5%AE%83"><span class="nav-text">其它</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#set"><span class="nav-text">set</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#read"><span class="nav-text">read</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#exit"><span class="nav-text">exit</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#source"><span class="nav-text">source</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="dounine"
      src="https://avatars.githubusercontent.com/u/41814469?s=400&u=48bf60a3428a3cb86a84a110c8688930cf6ceb08&v=4">
  <p class="site-author-name" itemprop="name">dounine</p>
  <div class="site-description" itemprop="description">回首向来萧瑟处</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">75</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">48</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/99MyCql" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;99MyCql" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://bkfish.gitee.io/" title="https:&#x2F;&#x2F;bkfish.gitee.io&#x2F;" rel="noopener" target="_blank">bkfish</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://hitworld.github.io/" title="https:&#x2F;&#x2F;hitworld.github.io&#x2F;" rel="noopener" target="_blank">w4rd3n</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://wyjoutstanding.github.io/" title="https:&#x2F;&#x2F;wyjoutstanding.github.io&#x2F;" rel="noopener" target="_blank">wyjoutstanding</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://iwtf.github.io/" title="https:&#x2F;&#x2F;iwtf.github.io&#x2F;" rel="noopener" target="_blank">IWTF</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://wood1314.github.io/" title="https:&#x2F;&#x2F;wood1314.github.io&#x2F;" rel="noopener" target="_blank">wood</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://desperadoccy.xyz/" title="https:&#x2F;&#x2F;desperadoccy.xyz&#x2F;" rel="noopener" target="_blank">desperadoccy</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://doudouqaq.github.io/" title="https:&#x2F;&#x2F;doudouqaq.github.io&#x2F;" rel="noopener" target="_blank">doudouqaq</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://kylinnnnn.github.io/" title="https:&#x2F;&#x2F;kylinnnnn.github.io&#x2F;" rel="noopener" target="_blank">kylinnnnn</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://miaotony.xyz/" title="https:&#x2F;&#x2F;miaotony.xyz" rel="noopener" target="_blank">miaotony</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://110.40.153.120:3030/" title="http:&#x2F;&#x2F;110.40.153.120:3030&#x2F;" rel="noopener" target="_blank">AZhou</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/weixin_40986490" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_40986490" rel="noopener" target="_blank">白速龙王的回眸</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.csdn.net/weixin_43116322" title="https:&#x2F;&#x2F;blog.csdn.net&#x2F;weixin_43116322" rel="noopener" target="_blank">Ethan</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.dounine.live/shell%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/41814469?s=400&u=48bf60a3428a3cb86a84a110c8688930cf6ceb08&v=4">
      <meta itemprop="name" content="dounine">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dounine's blog">
      <meta itemprop="description" content="回首向来萧瑟处">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="shell学习笔记 | dounine's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          shell学习笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-04-25 15:59:05" itemprop="dateCreated datePublished" datetime="2021-04-25T15:59:05+08:00">2021-04-25</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Base/" itemprop="url" rel="index"><span itemprop="name">九层之台，起于累土</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Base/Language/" itemprop="url" rel="index"><span itemprop="name">程序设计语言</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>9k</span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>[TOC]</p>
<h2 id="0-前言"><a href="#0-前言" class="headerlink" title="0. 前言"></a>0. 前言</h2><p>鉴于实习中经常使用 shell 语言，因此趁此机会好好学习一下“强大”的 shell 语言。</p>
<span id="more"></span>

<p>参考：</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://wangdoc.com/bash/index.html">Bash 脚本教程</a></li>
<li><a target="_blank" rel="noopener" href="http://c.biancheng.net/cpp/shell/">Linux Shell脚本教程：30分钟玩转Shell脚本编程</a></li>
</ul>
<h2 id="1-简介"><a href="#1-简介" class="headerlink" title="1. 简介"></a>1. 简介</h2><p>shell 直译为壳。在操作系统（Linux）中，被称为外壳，通常与 kernel 内核相对立。在没有图形界面的时代，shell 是<strong>用户与操作系统交互的接口</strong>。</p>
<p>shell 本身是一个程序。在操作系统实验课程中，老师曾让我们实现一个微型 shell ，代码见：<a target="_blank" rel="noopener" href="https://github.com/99MyCql/OS_pratice/blob/master/pratice2/sh3.c">https://github.com/99MyCql/OS_pratice</a>。它包括 shell 的许多基本功能：<strong>命令提示符</strong>、<strong>运行命令&#x2F;程序</strong>（如：cat、echo、ls等）、<strong>重定向输入输出</strong>、<strong>管道</strong>。完成实验时，成就感满满，几乎与真实的 shell 无疑。</p>
<p>但，当时的我可能忽略了 shell 的另一个“身份”——<strong>解释器</strong>。shell 解释器可运行 shell 脚本语言，它支持变量、条件判断、循环等等语法。这让 shell 具备了<strong>可编程性</strong>，而失去这一大功能的 shell 只能称为 mini shell 。</p>
<p>关于解释型语言的定义，以及与编译型语言的区别，就不在此赘述了。</p>
<p>shell 分为很多种，包括：Bourne Shell（sh）、Bourne Again shell（bash）、Z Shell（zsh）等等，它们的本质基本相同，本文将主要基于 <strong>Bash Shell</strong> 。</p>
<p>接触过 python 的hxd应该知道，python 既可以在解释器中一行一行地敲，也可以写在一个文件中再运行文件。</p>
<p>shell 也是同理，既可以运行在命令行，也可以写入脚本文件再执行。shell 脚本语言的代码文件以 <code>.sh</code> 结尾：</p>
<ul>
<li>可以通过执行解释器执行：<code>bash test.sh</code></li>
<li>或者直接使用当前命令行的解释器执行：相对路径执行 <code>./test.sh</code> 或绝对路径 <code>/home/test/test.sh</code>（需为脚本添加可执行权限 <code>chmod +x test.sh</code> ）</li>
</ul>
<p>在 shell 脚本文件中，需要在<strong>第一行添加</strong>如下内容，指定解释器，如下指定 bash shell 为解释器：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 或者， env 命令（这个命令总是在 /usr/bin 目录），返回 Bash 可执行文件的位置</span></span><br><span class="line"><span class="comment">#!/usr/bin/env bash</span></span><br></pre></td></tr></table></figure>

<p>shell 中注释为 <code>#</code> 。</p>
<h2 id="2-使用命令"><a href="#2-使用命令" class="headerlink" title="2. 使用命令"></a>2. 使用命令</h2><p>在 shell 命令行中，可以输入cat、echo、grep等命令（这些命令本质是一个可执行文件），去执行对应的程序。</p>
<p>同样，在 shell 脚本中，也可以使用命令，包括<strong>内部命令</strong>和<strong>外部命令</strong>（在我看来 shell 语言中的命令就相当于其他语言中的<strong>库函数</strong>）。比如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello world&quot;</span></span><br></pre></td></tr></table></figure>

<p>同时还包括：</p>
<ul>
<li>管道 <code>|</code></li>
<li>重定向 <code>&lt;</code> <code>&gt;</code></li>
<li>命令结束符 <code>;</code> 。使用：<code>Command1 ; Command2</code> 允许单行多个命令，第二个命令总是接着第一个命令执行，不管第一个命令执行成功或失败。</li>
<li>命令组合符 <code>&amp;&amp;</code> <code>||</code> 。使用：<code>Command1 &amp;&amp; Command2</code> 第一个命令运行成功，才继续运行第二个命令；<code>Command1 || Command2</code> 第一个命令运行失败，才继续运行第二个命令。</li>
</ul>
<p>更多 Linux 命令可以参见我的另一篇笔记：<a target="_blank" rel="noopener" href="https://99mycql.github.io/application/linux%E5%91%BD%E4%BB%A4%E5%AD%A6%E4%B9%A0.html">linux命令学习笔记</a>。</p>
<h2 id="3-变量"><a href="#3-变量" class="headerlink" title="3. 变量"></a>3. 变量</h2><h3 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=value</span><br><span class="line">var=<span class="string">&#x27;value&#x27;</span></span><br><span class="line">var=<span class="string">&quot;value&quot;</span></span><br></pre></td></tr></table></figure>

<p>变量名：由字母、数字和下划线字符组成；首字符必须是字母下划线，不能是数字。</p>
<p>变量值：没有数据类型的概念，都是字符串，如果值中包含空格，需使用引号包围。</p>
<p><strong>注意：赋值符号附近不能有空格。</strong></p>
<p>同时，可以<strong>将命令执行的结果赋给变量</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var=`<span class="built_in">command</span>`</span><br><span class="line">var=$(<span class="built_in">command</span>) <span class="comment"># 更推荐这种表示方式</span></span><br></pre></td></tr></table></figure>

<p>也可以<strong>将运算结果赋给变量</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var=$((<span class="number">5</span> * <span class="number">7</span>))</span><br></pre></td></tr></table></figure>

<h3 id="使用变量"><a href="#使用变量" class="headerlink" title="使用变量"></a>使用变量</h3><p>两种方式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$var</span></span><br><span class="line"><span class="variable">$&#123;var&#125;</span> <span class="comment"># 更推荐这种表示方式</span></span><br></pre></td></tr></table></figure>

<p>花括号 <code>&#123;&#125;</code> 用于区分变量边界。比如：在如下代码中，不使用花括号，会把 <code>varScript</code> 当成变量。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var=<span class="string">&quot;Java&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;I am good at <span class="variable">$varScript</span>&quot;</span> <span class="comment"># 错误</span></span><br></pre></td></tr></table></figure>

<p>如果变量值<strong>包含连续空格或制表符，使用变量时应用双引号 <code>&quot;&quot;</code> 包围起来</strong>，因为 Shell 会将多个空格合为一个：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var=<span class="string">&quot;1      2  3&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span>   <span class="comment"># 1 2 3</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$var</span>&quot;</span> <span class="comment"># 1      2  3</span></span><br></pre></td></tr></table></figure>

<p><strong>注意：当使用单引号 <code>&#39;&#39;</code> 将包围变量时，变量将不会解析，而是会被当成普通字符串</strong>：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var=<span class="string">&quot;1      2  3&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span>   <span class="comment"># 1 2 3</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$var</span>&quot;</span> <span class="comment"># 1      2  3</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&#x27;$var&#x27;</span> <span class="comment"># $var</span></span><br></pre></td></tr></table></figure>

<h3 id="修改变量值"><a href="#修改变量值" class="headerlink" title="修改变量值"></a>修改变量值</h3><p>重新赋值即可：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var=<span class="string">&quot;hello world&quot;</span> <span class="comment"># hello world</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br><span class="line">var=<span class="string">&quot;hello world!!!&quot;</span> <span class="comment"># hello world!!!</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure>

<h3 id="删除变量"><a href="#删除变量" class="headerlink" title="删除变量"></a>删除变量</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var=<span class="string">&quot;hello world&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span> <span class="comment"># hello world</span></span><br><span class="line"><span class="built_in">unset</span> var</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span> <span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>shell 中不存在的变量一律等于空字符串，所以即使unset命令删除了变量，还是可以读取这个变量（值为空字符串）。而且，被删除的变量可再次使用。</p>
<h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><p>用户创建的变量仅用于当前 Shell，子 Shell （在当前shell中运行的shell）默认读取不到父 Shell 定义的变量。</p>
<p>使用 <code>export</code> 命令可以设置变量为环境变量，使子 shell 可以读取该变量。</p>
<p>测试脚本 <code>test.sh</code> 如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$test_export</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$test_noexport</span></span><br><span class="line"><span class="built_in">export</span> test_export2=<span class="string">&quot;export&quot;</span></span><br></pre></td></tr></table></figure>

<p>运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> test_export=<span class="string">&quot;export&quot;</span> <span class="comment"># 设为环境变量，子 shell 可读</span></span><br><span class="line">$ test_noexport=<span class="string">&quot;no export&quot;</span></span><br><span class="line">$ ./test.sh</span><br><span class="line"><span class="built_in">export</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">$ <span class="built_in">echo</span> <span class="variable">$test_export2</span> <span class="comment"># 显然，父 shell 也读不到子 shell export 的变量</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>注意：子 Shell 如果修改环境变量，不会影响父 Shell 。</p>
<p>常用的环境变量有：</p>
<ul>
<li><code>HOME</code>：用户的主目录。</li>
<li><code>HOST</code>：当前主机的名称。</li>
<li><code>PATH</code>：由冒号分开的目录列表，当输入可执行程序名后，会搜索这个目录列表。</li>
<li><code>PWD</code>：当前工作目录。</li>
<li><code>USER</code>：当前用户的用户名。</li>
<li><code>LINENO</code>：返回它在脚本中的行号。</li>
<li><code>FUNCNAME</code>：返回一个数组，内容是当前的函数调用堆栈。该数组的0号成员是当前调用的函数，1号成员是调用当前函数的函数。</li>
<li><code>BASH_SOURCE</code>：返回一个数组，内容是当前的脚本调用堆栈。该数组的0号成员是当前执行的脚本，1号成员是调用当前脚本的脚本</li>
</ul>
<h3 id="只读变量"><a href="#只读变量" class="headerlink" title="只读变量"></a>只读变量</h3><p><code>readonly</code> 命令指示变量只读，不可修改。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">readonly</span> var=<span class="string">&quot;hello&quot;</span></span><br><span class="line">var=<span class="string">&quot;hello world&quot;</span>   <span class="comment"># var: readonly variable</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span>           <span class="comment"># hello</span></span><br></pre></td></tr></table></figure>

<h3 id="变量默认值"><a href="#变量默认值" class="headerlink" title="变量默认值"></a>变量默认值</h3><ul>
<li><code>$&#123;var:-word&#125;</code> 如果变量 var 为空或已被删除(unset)，那么返回 word，但不改变 var 的值。</li>
<li><code>$&#123;var:=word&#125;</code> 如果变量 var 为空或已被删除(unset)，那么返回 word，并将 var 的值设置为 word。</li>
<li><code>$&#123;var:?message&#125;</code> 如果变量 var 为空或已被删除(unset)，那么将消息 message 送到标准错误输出，并将脚本停止运行，可以用来检测变量 var 是否可以被正常赋值。</li>
<li><code>$&#123;var:+word&#125;</code> 如果变量 var 被定义，那么返回 word，但不改变 var 的值。</li>
</ul>
<h3 id="特殊变量"><a href="#特殊变量" class="headerlink" title="特殊变量"></a>特殊变量</h3><ul>
<li><code>$0</code> 当前脚本的文件名。</li>
<li><code>$n</code> 传递给脚本或函数的参数，<code>$1</code> 表示第一个参数，<code>$2</code> 表示第二个参数。</li>
<li><code>$#</code> 传递给脚本或函数的参数个数。</li>
<li><code>$*</code> 传递给脚本或函数的所有参数。</li>
<li><code>$@</code> 传递给脚本或函数的所有参数。被双引号 <code>&quot;&quot;</code> 包含时，<code>$*</code> 会将所有参数作为一个整体，而 <code>$@</code> 会分开。</li>
<li><code>$?</code> 上个命令的退出状态，或函数的返回值。</li>
<li><code>$$</code> 当前Shell进程ID。对于 Shell 脚本，就是这些脚本所在的进程ID。</li>
</ul>
<h2 id="4-字符串"><a href="#4-字符串" class="headerlink" title="4. 字符串"></a>4. 字符串</h2><p>字符串是 shell 最基本的数据类型。</p>
<p>拼接字符串（推荐使用 <code>&#123;&#125;</code> ）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">str=<span class="string">&quot;world&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello <span class="variable">$str</span>!&quot;</span>    <span class="comment"># hello world!</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;hello <span class="variable">$&#123;str&#125;</span>!&quot;</span>  <span class="comment"># hello world!</span></span><br></pre></td></tr></table></figure>

<p>获取字符串长度（变量使用必须要加 <code>&#123;&#125;</code> ）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">str=<span class="string">&quot;hello&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;#str&#125;</span> <span class="comment"># 5</span></span><br></pre></td></tr></table></figure>

<p>提取字符串（<code>offset</code> 默认为0，<code>length</code> 默认到结尾）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;str:offset:length&#125;</span></span><br></pre></td></tr></table></figure>

<p>字符转义：</p>
<ul>
<li>经典的转义字符 <code>\n</code> <code>\t</code> 转义；</li>
<li>对于 shell 中的特殊字符，如 <code>$</code> <code>*</code> <code>&amp;</code> 等，需要转义；</li>
<li>使用单引号 <code>&#39;&#39;</code> 时，转义字符都会被当成普通字符串</li>
</ul>
<p>字符串匹配并删除：</p>
<ul>
<li><p><code>$&#123;str#pattern&#125;</code> 从字符串<strong>首字符</strong>开始，删除最短匹配的部分，返回剩余字符串。<code>pattern</code> 支持 <code>*</code>、<code>?</code>、<code>[]</code> 等通配符。</p>
</li>
<li><p><code>$&#123;str##pattern&#125;</code> 从字符串<strong>首字符</strong>开始，删除最长匹配（贪婪匹配）的部分，返回剩余字符串。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">str=/home/root/shell/study</span><br><span class="line">str=<span class="variable">$&#123;str#/*/&#125;</span>    <span class="comment"># root/shell/study</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$str</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;str##/*/&#125;</span>  <span class="comment"># root/shell/study</span></span><br><span class="line">str=/home/root/shell/study</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;str##/*/&#125;</span>  <span class="comment"># study</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>$&#123;str%pattern&#125;</code> 从字符串<strong>尾字符</strong>开始，删除最短匹配的部分，返回剩余字符串。</p>
</li>
<li><p><code>$&#123;str%%pattern&#125;</code> 从字符串<strong>尾字符</strong>开始，删除最长匹配的部分，返回剩余字符串。</p>
</li>
</ul>
<p>更高级的匹配建议使用：<code>grep</code>、<code>awk</code>。</p>
<h2 id="5-数组"><a href="#5-数组" class="headerlink" title="5. 数组"></a>5. 数组</h2><h3 id="定义数组"><a href="#定义数组" class="headerlink" title="定义数组"></a>定义数组</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr=(value0 value1 value2 value3)</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">arr=(</span><br><span class="line">  value0</span><br><span class="line">  value1</span><br><span class="line">  value2</span><br><span class="line">  value3</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>或单独定义（可以不使用连续的下标，而且下标的范围没有限制）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr[0]=value0</span><br><span class="line">arr[1]=value1</span><br><span class="line">arr[3]=value3</span><br></pre></td></tr></table></figure>

<h3 id="追加"><a href="#追加" class="headerlink" title="追加"></a>追加</h3><p>使用 <code>+=</code> 可追加元素：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">arr=(a b c d)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$arr</span>       <span class="comment"># a b c d</span></span><br><span class="line">arr+=(e f)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;arr[@]&#125;</span>  <span class="comment"># a b c d e f</span></span><br></pre></td></tr></table></figure>

<h3 id="使用数组"><a href="#使用数组" class="headerlink" title="使用数组"></a>使用数组</h3><p>单个元素：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">value=<span class="variable">$&#123;arr[i]&#125;</span></span><br></pre></td></tr></table></figure>

<p>全部元素：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;arr[*]&#125;</span></span><br><span class="line"><span class="variable">$&#123;arr[@]&#125;</span></span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：</p>
<ul>
<li><strong>默认 <code>$&#123;arr&#125; = $&#123;arr[0]&#125;</code> 而非全部元素。</strong></li>
<li><code>$&#123;arr[@]&#125;</code> <code>&quot;$&#123;arr[@]&#125;&quot;</code> <code>$&#123;arr[*]&#125;</code> <code>&quot;$&#123;arr[*]&#125;&quot;</code> 有不同效果，详情见：<a target="_blank" rel="noopener" href="https://wangdoc.com/bash/array.html#%E8%AF%BB%E5%8F%96%E6%89%80%E6%9C%89%E6%88%90%E5%91%98">读取所有成员</a>，<strong>推荐使用 <code>&quot;$&#123;arr[@]&#125;&quot;</code></strong></li>
</ul>
<p>多个元素：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;arr[@]:offset:length&#125;</span></span><br></pre></td></tr></table></figure>

<p>获取数组长度：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$&#123;#arr[*]&#125;</span></span><br><span class="line"><span class="variable">$&#123;#arr[@]&#125;</span></span><br></pre></td></tr></table></figure>

<p>获知数组哪个位置上有值，即获取数组中存在值的元素的索引（提取数组索引）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">unset</span> arr</span><br><span class="line">arr[1]=a</span><br><span class="line">arr[3]=b</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;!arr[@]&#125;</span> <span class="comment"># 1 3</span></span><br></pre></td></tr></table></figure>

<h2 id="6-运算表达式"><a href="#6-运算表达式" class="headerlink" title="6. 运算表达式"></a>6. 运算表达式</h2><p>语法：使用 <code>(( ))</code> 包裹，或者使用 <code>expr</code> 命令。更推荐前一种。</p>
<p>获取表达式的结果：<code>$(( ))</code> 。</p>
<p>在表达式中可以使用变量，且**不需要加<code>$</code>**。若变量为空，则当作 0 。</p>
<p>在表达式中，可以使用进制：默认十进制、<code>0num</code> 八进制、<code>0xnum</code> 十六进制、<code>base#num</code> base进制</p>
<h3 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h3><ul>
<li><code>+</code> 加法</li>
<li><code>-</code> 减法</li>
<li><code>*</code> 乘法</li>
<li><code>/</code> 除法（整除）</li>
<li><code>%</code> 余数</li>
<li><code>**</code> 指数</li>
<li><code>++</code> 自增运算（前缀或后缀）</li>
<li><code>--</code> 自减运算（前缀或后缀）</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">i=0</span><br><span class="line"><span class="built_in">echo</span> $((++i))       <span class="comment"># 1</span></span><br><span class="line"><span class="built_in">echo</span> $(((<span class="number">1</span>+<span class="number">2</span>) * <span class="number">3</span>)) <span class="comment"># 9</span></span><br></pre></td></tr></table></figure>

<h3 id="位运算"><a href="#位运算" class="headerlink" title="位运算"></a>位运算</h3><p>与 C 语言一致：</p>
<ul>
<li><code>&lt;&lt;</code> 左移</li>
<li><code>&gt;&gt;</code> 右移</li>
<li><code>&amp;</code> 与</li>
<li><code>|</code> 或</li>
<li><code>~</code> 按位取反</li>
<li><code>^</code> 异或</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> $((<span class="number">16</span>&gt;&gt;<span class="number">2</span>)) <span class="comment"># 4</span></span><br></pre></td></tr></table></figure>

<h3 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h3><p>与 C 语言一致：</p>
<ul>
<li><code>&lt;</code> 小于</li>
<li><code>&gt;</code> 大于</li>
<li><code>&lt;=</code> 小于或相等</li>
<li><code>&gt;=</code> 大于或相等</li>
<li><code>==</code> 相等</li>
<li><code>!=</code> 不相等</li>
<li><code>&amp;&amp;</code> 逻辑与</li>
<li><code>||</code> 逻辑或</li>
<li><code>!</code> 逻辑否</li>
<li><code>expr1 ? expr2 : expr3</code> 三元条件运算</li>
</ul>
<p>如果逻辑表达式为真，返回1，否则返回0：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> $((<span class="number">3</span> &gt; <span class="number">2</span>)) <span class="comment"># 1</span></span><br></pre></td></tr></table></figure>

<h3 id="赋值运算"><a href="#赋值运算" class="headerlink" title="赋值运算"></a>赋值运算</h3><p>支持直接赋值 <code>=</code> ，也支持 <code>+=</code> <code>*=</code> <code>|=</code> 等等。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">i=1</span><br><span class="line"><span class="built_in">echo</span> $((i+=<span class="number">1</span>)) <span class="comment"># 2</span></span><br></pre></td></tr></table></figure>

<h2 id="7-条件判断-if"><a href="#7-条件判断-if" class="headerlink" title="7. 条件判断 if"></a>7. 条件判断 if</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> commands</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  commands</span><br><span class="line">[<span class="keyword">elif</span> commands</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  commands...]</span><br><span class="line">[<span class="keyword">else</span></span><br><span class="line">  commands]</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> commands; <span class="keyword">then</span></span><br><span class="line">  commands</span><br><span class="line">[<span class="keyword">elif</span> commands; <span class="keyword">then</span></span><br><span class="line">  commands...]</span><br><span class="line">[<span class="keyword">else</span></span><br><span class="line">  commands]</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<p><code>if</code> 后面所接的判断条件是一个命令，命令返回成功（0）则为真，返回失败（非0）则为假。</p>
<h3 id="test"><a href="#test" class="headerlink" title="test"></a>test</h3><p><code>if</code> 判断条件通常使用 <code>test</code> 命令，它是一个用于判断的命令，它有三种形式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 写法一</span></span><br><span class="line"><span class="built_in">test</span> <span class="built_in">expr</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 写法二</span></span><br><span class="line">[ <span class="built_in">expr</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 写法三</span></span><br><span class="line">[[ <span class="built_in">expr</span> ]]</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：</p>
<ul>
<li>中括号 <code>[ ]</code> 与表达式之间必须包含空格</li>
<li>第二种形式与第三种形式，在某些场景（比如逻辑判断）有所不同，详情参考：<a target="_blank" rel="noopener" href="https://www.zsythink.net/archives/2252">https://www.zsythink.net/archives/2252</a></li>
</ul>
<p>由于 <code>test</code> 是一个命令，它支持很多选项：</p>
<h4 id="1-文件判断"><a href="#1-文件判断" class="headerlink" title="1) 文件判断"></a>1) 文件判断</h4><ul>
<li><code>[ -a $file ]</code>：如果 file 存在，则为true。</li>
<li><code>[ -b $file ]</code>：如果 file 存在并且是一个块（设备）文件，则为true。</li>
<li><code>[ -c $file ]</code>：如果 file 存在并且是一个字符（设备）文件，则为true。</li>
<li><code>[ -d $file ]</code>：如果 file 存在并且是一个目录，则为true。</li>
<li><code>[ -e $file ]</code>：如果 file 存在，则为true。</li>
<li><code>[ -f $file ]</code>：如果 file 存在并且是一个普通文件，则为true。</li>
</ul>
<p>更多见：<a target="_blank" rel="noopener" href="https://wangdoc.com/bash/condition.html#%E6%96%87%E4%BB%B6%E5%88%A4%E6%96%AD">条件判断</a></p>
<h4 id="2-字符串判断"><a href="#2-字符串判断" class="headerlink" title="2) 字符串判断"></a>2) 字符串判断</h4><ul>
<li><code>[ $str ]</code>：如果str不为空（长度大于0），则判断为真。</li>
<li><code>[ -n $str ]</code>：如果字符串str的长度大于零，则判断为真。</li>
<li><code>[ -z $str ]</code>：如果字符串str的长度为零，则判断为真。</li>
<li><code>[ $str1 = $str2 ]</code>：如果str1和str2相同，则判断为真。</li>
<li><code>[ $str1 == $str2 ]</code>：等同于[ $str1 &#x3D; $str2 ]。</li>
<li><code>[ $str1 != $str2 ]</code>：如果str1和str2不相同，则判断为真。</li>
<li><code>[ $str1 &#39;&gt;&#39; $str2 ]</code>：如果按照字典顺序str1排列在str2之后，则判断为真。</li>
<li><code>[ $str1 &#39;&lt;&#39; $str2 ]</code>：如果按照字典顺序str1排列在str2之前，则判断为真。</li>
</ul>
<p><strong>注意</strong>：test命令内部的<code>&gt;</code>和<code>&lt;</code>，必须用引号括起来（或者是用反斜杠转义），否则它们会被 shell 解释为重定向操作符。</p>
<h4 id="3-整数判断"><a href="#3-整数判断" class="headerlink" title="3) 整数判断"></a>3) 整数判断</h4><p>由于 <code>&gt;</code> <code>&lt;</code> 会被误解为重定向操作法，所以有专门的整数判断指令。</p>
<ul>
<li><code>[ $int1 -eq $int2 ]</code>：如果int1等于int2，则为true。</li>
<li><code>[ $int1 -ne $int2 ]</code>：如果int1不等于int2，则为true。</li>
<li><code>[ $int1 -le $int2 ]</code>：如果int1小于或等于int2，则为true。</li>
<li><code>[ $int1 -lt $int2 ]</code>：如果int1小于int2，则为true。</li>
<li><code>[ $int1 -ge $int2 ]</code>：如果int1大于或等于int2，则为true。</li>
<li><code>[ $int1 -gt $int2 ]</code>：如果int1大于int2，则为true。</li>
</ul>
<h4 id="4-逻辑判断"><a href="#4-逻辑判断" class="headerlink" title="4) 逻辑判断"></a>4) 逻辑判断</h4><ul>
<li><code>[[ $expr1 &amp;&amp; $expr1 ]]</code> &#x2F; <code>[ $expr1 ] &amp;&amp; [ $expr1 ]</code></li>
<li><code>[[ $expr1 || $expr1 ]]</code> &#x2F; <code>[ $expr1 ] || [ $expr1 ]</code></li>
<li><code>[ ! $expr1 ]</code> &#x2F; <code>[ ! \( $expr1 &amp;&amp; $expr2 \) ]</code></li>
</ul>
<p><strong>注意</strong>：test命令内部使用<code>(</code>和<code>)</code>必须使用引号或转义。</p>
<h3 id="运算表达式"><a href="#运算表达式" class="headerlink" title="运算表达式"></a>运算表达式</h3><p><code>if</code> 判断条件也可以使用运算表达式 <code>(( ))</code>。</p>
<p>但注意：<strong>运算表达式返回非0 <code>((1))</code> 表示真，返回0 <code>((0))</code> 表示假</strong>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> $((<span class="number">2</span> &gt; <span class="number">1</span>)) <span class="comment"># 1</span></span><br><span class="line"><span class="keyword">if</span> ((2&gt;1)); <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">true</span> <span class="comment"># true</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="literal">false</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h3 id="普通命令"><a href="#普通命令" class="headerlink" title="普通命令"></a>普通命令</h3><p><code>if</code> 判断条件可以直接使用命令，命令返回成功（0）则为真，返回失败（非0）则为假。</p>
<p>当然，也可以使用管道、重定向、命令结束符<code>;</code>、命令组合符<code>&amp;&amp;</code> <code>||</code>等。</p>
<p>比如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="built_in">mkdir</span> temp &amp;&amp; <span class="built_in">cd</span> temp; <span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;enter in temp/&quot;</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>

<h2 id="8-case"><a href="#8-case" class="headerlink" title="8. case"></a>8. case</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> expression <span class="keyword">in</span></span><br><span class="line">  pattern )</span><br><span class="line">    commands ;;</span><br><span class="line">  pattern )</span><br><span class="line">    commands ;;</span><br><span class="line">  ...</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<p><code>pattern</code> 支持基本的模式匹配，比如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;输入一个字母或数字 &gt; &quot;</span></span><br><span class="line"><span class="built_in">read</span> character</span><br><span class="line"><span class="keyword">case</span> <span class="variable">$character</span> <span class="keyword">in</span></span><br><span class="line">  [[:lower:]] | [[:upper:]] ) <span class="built_in">echo</span> <span class="string">&quot;输入了字母 <span class="variable">$character</span>&quot;</span></span><br><span class="line">                              ;;</span><br><span class="line">  [0-9] )                     <span class="built_in">echo</span> <span class="string">&quot;输入了数字 <span class="variable">$character</span>&quot;</span></span><br><span class="line">                              ;;</span><br><span class="line">  * )                         <span class="built_in">echo</span> <span class="string">&quot;输入不符合要求&quot;</span></span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure>

<h2 id="9-循环"><a href="#9-循环" class="headerlink" title="9. 循环"></a>9. 循环</h2><h3 id="while"><a href="#while" class="headerlink" title="while"></a>while</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> commands; <span class="keyword">do</span></span><br><span class="line">  commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>判断条件与 <code>if</code> 一样。</p>
<h3 id="until"><a href="#until" class="headerlink" title="until"></a>until</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">until commands; <span class="keyword">do</span></span><br><span class="line">  commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="for"><a href="#for" class="headerlink" title="for"></a>for</h3><p>遍历列表每一项：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> variable <span class="keyword">in</span> <span class="variable">$&#123;arr[@]&#125;</span>; <span class="keyword">do</span></span><br><span class="line">  commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>或：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (( expr1; expr2; expr3 )); <span class="keyword">do</span></span><br><span class="line">  commands</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<p>比如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> ((i=0; i&lt;10; i++)); <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">seq</span> 0 9); <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="continue"><a href="#continue" class="headerlink" title="continue"></a>continue</h3><p>提前终止本轮循环，进行下一轮循环。</p>
<h2 id="10-函数"><a href="#10-函数" class="headerlink" title="10. 函数"></a>10. 函数</h2><p>定义：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一种</span></span><br><span class="line"><span class="function"><span class="title">func</span></span>() &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 第二种</span></span><br><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">func</span></span>() &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">func <span class="comment"># 直接调用无参数</span></span><br><span class="line">func param1 param2 <span class="comment"># 传入参数</span></span><br></pre></td></tr></table></figure>

<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><p><code>$1~$9</code>：函数的第1个到第9个的参数。<br><code>$0</code>：函数所在的脚本名。<br><code>$#</code>：函数的参数总数。<br><code>$@</code>：函数的全部参数，参数之间使用空格分隔。<br><code>$*</code>：函数的全部参数，参数之间使用变量<code>$IFS</code>值的第一个字符分隔，默认为空格，但是可以自定义。</p>
<h3 id="return"><a href="#return" class="headerlink" title="return"></a>return</h3><p>函数返回，可指定返回值，调用者通过 <code>$?</code> 获取。</p>
<h3 id="local-局部变量"><a href="#local-局部变量" class="headerlink" title="local 局部变量"></a>local 局部变量</h3><p>shell 中定义变量属于全局变量，在函数中声明局部变量需使用 <code>local</code> ，比如：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">func1</span></span>() &#123;</span><br><span class="line">  foo1=1</span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$foo1</span>  <span class="comment"># 1</span></span><br><span class="line">&#125;</span><br><span class="line">func1</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$foo1</span>    <span class="comment"># 1</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">func2</span></span>() &#123;</span><br><span class="line">  <span class="built_in">local</span> foo2</span><br><span class="line">  foo2=2</span><br><span class="line">  <span class="built_in">echo</span> <span class="variable">$foo2</span>  <span class="comment"># 2</span></span><br><span class="line">&#125;</span><br><span class="line">func2</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$foo2</span>    <span class="comment"># 空</span></span><br></pre></td></tr></table></figure>

<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><p>主要介绍在脚本中使用较多，而在命令行中使用较少的命令。</p>
<h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><p>命令行下不带任何参数，直接运行 <code>set</code> ，会显示<strong>所有的环境变量和 Shell 函数</strong>。</p>
<p>常用选项：</p>
<ul>
<li><code>set -u</code> 遇到不存在的变量则报错（默认会跳过）</li>
<li><code>set -x</code> 在运行命令前，先输出该命令，常用于调试。<code>set -x</code> 开启，<code>set +x</code> 关闭。</li>
<li><code>set -e</code> 遇到错误则终止执行（默认命令执行出错会忽略）。<code>set -e</code> 有一个例外情况，就是不适用于管道命令（多个子命令通过管道符组合，Bash 会把最后一个子命令的返回值，作为整个命令的返回值）。</li>
<li><code>set -o pipefail</code> 用来解决这种情况，只要一个子命令失败，整个管道命令就失败，脚本就会终止执行。</li>
</ul>
<p>使用示例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># set -x # 调试时再开启</span></span><br><span class="line"><span class="built_in">set</span> -euo pipefail</span><br></pre></td></tr></table></figure>

<p><strong>注意</strong>：</p>
<ul>
<li>使用 <code>set -e</code> 后，如果调用函数，<strong>函数返回了非零值，程序也会退出</strong>！</li>
</ul>
<h3 id="read"><a href="#read" class="headerlink" title="read"></a>read</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> [-options] [var...]</span><br></pre></td></tr></table></figure>

<p>输入由回车结束，用户输入将被保存到变量 <code>var</code> ，多个输入项通过空格区分。</p>
<p>若未提供变量名，环境变量 <code>REPLY</code> 会包含用户输入的一整行数据。</p>
<p>若提供的输入项少于变量数目，则剩余变量为空。</p>
<p>常用选项：</p>
<ul>
<li><code>p</code> 指定提示信息。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> -p <span class="string">&quot;Enter your input:&quot;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$REPLY</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>a</code> 把用户的输入赋值给一个数组，从零号位置开始。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> -a arr</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;arr[@]&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><code>n</code> 指定只读取若干个字符作为变量值，而不是整行读取。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">read</span> -n 3 var</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$var</span></span><br></pre></td></tr></table></figure>

<p>read 还可用于读文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">filename=<span class="string">&#x27;xxx&#x27;</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line; <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$line</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span> &lt; <span class="variable">$filename</span></span><br></pre></td></tr></table></figure>

<h3 id="exit"><a href="#exit" class="headerlink" title="exit"></a>exit</h3><p>用于退出当前执行的 Shell ，并返回一个值，返回 0 代表成功，返回 非0 代表失败。</p>
<h3 id="source"><a href="#source" class="headerlink" title="source"></a>source</h3><p>用于执行一个脚本文件，但不同于直接执行（会新建子 shell ），<code>source</code> 会在<strong>当前 shell</strong> 执行。</p>
<p>类似于加载外部库。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Shell/" rel="tag"><i class="fa fa-tag"></i> Shell</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/vue%E5%85%88%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E5%86%8D%E6%B8%B2%E6%9F%93.html" rel="prev" title="vue先加载数据再渲染">
                  <i class="fa fa-chevron-left"></i> vue先加载数据再渲染
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/ArangoDB%E5%85%A5%E9%97%A8.html" rel="next" title="ArangoDB入门">
                  ArangoDB入门 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments utterances-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dounine</span>
</div>
<div class="wordcount">
  <span class="post-meta-item">
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-line"></i>
    </span>
      <span>站点总字数：</span>
    <span title="站点总字数">492k</span>
  </span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




  

  <script class="next-config" data-name="enableMath" type="application/json">false</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<script class="next-config" data-name="utterances" type="application/json">{"enable":true,"repo":"99MyCql/99MyCql.github.io","issue_term":"pathname","theme":"github-light"}</script>
<script src="/js/third-party/comments/utterances.js"></script>

</body>
</html>
