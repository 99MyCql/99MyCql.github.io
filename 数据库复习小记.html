<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/golang32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/golang16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">
  <meta name="baidu-site-verification" content="code-RpvRDWfflk">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"blog.dounine.live","root":"/","images":"/images","scheme":"Mist","darkmode":false,"version":"8.11.1","exturl":false,"sidebar":{"position":"right","display":"always","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat"},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":null,"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="[TOC] 0. 前言大三下，只剩一门数据库原理课程考试了，趁复习之际，我打算对数据库内容知识进行简单总结。 实习面试时，曾倍受不懂数据库之苦。虽然以前接触过MySQL等数据库，但并没有深入了解和研究，对其原理更是雾里看花。 而随着数据库原理课程步步深入的讲解，才终于揭开数据库神秘的面纱。">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库复习小记">
<meta property="og:url" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0.html">
<meta property="og:site_name" content="dounine&#39;s blog">
<meta property="og:description" content="[TOC] 0. 前言大三下，只剩一门数据库原理课程考试了，趁复习之际，我打算对数据库内容知识进行简单总结。 实习面试时，曾倍受不懂数据库之苦。虽然以前接触过MySQL等数据库，但并没有深入了解和研究，对其原理更是雾里看花。 而随着数据库原理课程步步深入的讲解，才终于揭开数据库神秘的面纱。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/4.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/1.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/2.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/3.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/5.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/6.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/7.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/8.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/9.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/10.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/11.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/12.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/13.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/14.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/16.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/17.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/18.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/19.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/20.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/21.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/22.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/23.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/24.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/25.png">
<meta property="og:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/26.png">
<meta property="article:published_time" content="2020-07-06T01:48:28.000Z">
<meta property="article:modified_time" content="2020-07-06T01:48:28.000Z">
<meta property="article:author" content="dounine">
<meta property="article:tag" content="数据库">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/4.png">


<link rel="canonical" href="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0.html">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0.html","path":"数据库复习小记.html","title":"数据库复习小记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>数据库复习小记 | dounine's blog</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?66c7065aa71681df47eb23eff557978b"></script>




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">dounine's blog</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">18</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">48</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">75</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#0-%E5%89%8D%E8%A8%80"><span class="nav-text">0. 前言</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-text">1. 关系数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-%E5%85%B3%E7%B3%BB"><span class="nav-text">1.1. 关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-%E5%85%B3%E7%B3%BB%E6%93%8D%E4%BD%9C"><span class="nav-text">1.2. 关系操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-%E5%85%B3%E7%B3%BB%E7%9A%84%E5%AE%8C%E6%95%B4%E6%80%A7"><span class="nav-text">1.3. 关系的完整性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-%E5%85%B3%E7%B3%BB%E4%BB%A3%E6%95%B0"><span class="nav-text">1.4. 关系代数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-%E5%85%B3%E7%B3%BB%E6%BC%94%E7%AE%97"><span class="nav-text">1.5. 关系演算</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A0%87%E5%87%86%E8%AF%AD%E8%A8%80-SQL"><span class="nav-text">2. 关系数据库标准语言 SQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#2-1-%E6%95%B0%E6%8D%AE%E5%AE%9A%E4%B9%89"><span class="nav-text">2.1. 数据定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-2-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2"><span class="nav-text">2.2. 数据查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-3-%E6%95%B0%E6%8D%AE%E6%9B%B4%E6%96%B0"><span class="nav-text">2.3. 数据更新</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-4-%E8%A7%86%E5%9B%BE"><span class="nav-text">2.4. 视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-5-SQL-%E7%A4%BA%E4%BE%8B"><span class="nav-text">2.5. SQL 示例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-1-SQL%E5%AE%9A%E4%B9%89%E5%8A%9F%E8%83%BD%E3%80%81%E6%95%B0%E6%8D%AE%E6%8F%92%E5%85%A5"><span class="nav-text">2.5.1. SQL定义功能、数据插入</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-1-1-%E5%BB%BA%E7%AB%8B%E6%95%99%E5%AD%A6%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%B8%89%E4%B8%AA%E5%9F%BA%E6%9C%AC%E8%A1%A8"><span class="nav-text">2.5.1.1. 建立教学数据库的三个基本表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-1-2-DROP-TABLE%E3%80%81ALTER-TABLE%E3%80%81CREATE-INDEX%E3%80%81DROP-INDEX-%E5%8F%8AINSERT%E8%AF%AD%E5%8F%A5%E8%BE%93%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="nav-text">2.5.1.2. DROP TABLE、ALTER TABLE、CREATE INDEX、DROP INDEX 及INSERT语句输入数据</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-2-%E6%95%B0%E6%8D%AE%E6%9F%A5%E8%AF%A2"><span class="nav-text">2.5.2. 数据查询</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-2-1%EF%BC%8E%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE1%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E4%B8%8E%E5%A7%93%E5%90%8D"><span class="nav-text">2.5.2.1．查询选修1号课程的学生学号与姓名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-2-2%EF%BC%8E%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B%E5%90%8D%E4%B8%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E4%B8%8E%E5%A7%93%E5%90%8D"><span class="nav-text">2.5.2.2．查询选修课程名为数据库的学生学号与姓名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-2-3%EF%BC%8E%E6%9F%A5%E8%AF%A2%E4%B8%8D%E9%80%891%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E4%B8%8E%E5%A7%93%E5%90%8D"><span class="nav-text">2.5.2.3．查询不选1号课程的学生学号与姓名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-2-4%EF%BC%8E%E6%9F%A5%E8%AF%A2%E5%AD%A6%E4%B9%A0%E5%85%A8%E9%83%A8%E8%AF%BE%E7%A8%8B%E5%AD%A6%E7%94%9F%E5%A7%93%E5%90%8D"><span class="nav-text">2.5.2.4．查询学习全部课程学生姓名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-2-5%EF%BC%8E%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E5%AD%A6%E7%94%9F%E9%99%A4%E4%BA%86%E9%80%89%E4%BF%AE1%E5%8F%B7%E8%AF%BE%E7%A8%8B%E5%A4%96%E6%89%80%E6%9C%89%E6%88%90%E7%BB%A9%E5%9D%87%E5%8F%8A%E6%A0%BC%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7%E5%92%8C%E5%B9%B3%E5%9D%87%E6%88%90%E7%BB%A9%EF%BC%8C%E5%85%B6%E7%BB%93%E6%9E%9C%E6%8C%89%E5%B9%B3%E5%9D%87%E6%88%90%E7%BB%A9%E7%9A%84%E9%99%8D%E5%BA%8F%E6%8E%92%E5%88%97"><span class="nav-text">2.5.2.5．查询所有学生除了选修1号课程外所有成绩均及格的学生的学号和平均成绩，其结果按平均成绩的降序排列</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-2-6%EF%BC%8E%E6%9F%A5%E8%AF%A2%E9%80%89%E4%BF%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E6%88%90%E7%BB%A9%E7%AC%AC2%E5%90%8D%E7%9A%84%E5%AD%A6%E7%94%9F%E5%A7%93%E5%90%8D"><span class="nav-text">2.5.2.6．查询选修数据库成绩第2名的学生姓名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-2-7-%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%893%E4%B8%AA%E5%AD%A6%E5%88%86%E8%AF%BE%E7%A8%8B%E4%B8%AD%E6%9C%893%E9%97%A8%E4%BB%A5%E4%B8%8A%EF%BC%88%E5%90%AB3%E9%97%A8%EF%BC%89%E8%AF%BE%E7%A8%8B%E8%8E%B780%E5%88%86%E4%BB%A5%E4%B8%8A%EF%BC%88%E5%90%AB80%E5%88%86%EF%BC%89%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%A7%93%E5%90%8D"><span class="nav-text">2.5.2.7. 查询所有3个学分课程中有3门以上（含3门）课程获80分以上（含80分）的学生的姓名</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-2-8-%E6%9F%A5%E8%AF%A2%E9%80%89%E8%AF%BE%E9%97%A8%E6%95%B0%E5%94%AF%E4%B8%80%E7%9A%84%E5%AD%A6%E7%94%9F%E7%9A%84%E5%AD%A6%E5%8F%B7"><span class="nav-text">2.5.2.8. 查询选课门数唯一的学生的学号</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-2-9-SELECT%E8%AF%AD%E5%8F%A5%E4%B8%AD%E5%90%84%E7%A7%8D%E6%9F%A5%E8%AF%A2%E6%9D%A1%E4%BB%B6%E7%9A%84%E5%AE%9E%E9%AA%8C"><span class="nav-text">2.5.2.9. SELECT语句中各种查询条件的实验</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-3-%E6%95%B0%E6%8D%AE%E4%BF%AE%E6%94%B9%E3%80%81%E5%88%A0%E9%99%A4"><span class="nav-text">2.5.3. 数据修改、删除</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-3-1-%E6%8A%8A1%E5%8F%B7%E8%AF%BE%E7%A8%8B%E7%9A%84%E9%9D%9E%E7%A9%BA%E6%88%90%E7%BB%A9%E6%8F%90%E9%AB%9810%EF%BC%85"><span class="nav-text">2.5.3.1. 把1号课程的非空成绩提高10％</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-3-2-%E5%9C%A8SC%E8%A1%A8%E4%B8%AD%E5%88%A0%E9%99%A4%E8%AF%BE%E7%A8%8B%E5%90%8D%E4%B8%BA%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E6%88%90%E7%BB%A9%E7%9A%84%E5%85%83%E7%BB%84"><span class="nav-text">2.5.3.2. 在SC表中删除课程名为数据库的成绩的元组</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-3-3-%E5%9C%A8S%E5%92%8CSC%E8%A1%A8%E4%B8%AD%E5%88%A0%E9%99%A4%E5%AD%A6%E5%8F%B7%E4%B8%BA201215121%E7%9A%84%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE"><span class="nav-text">2.5.3.3. 在S和SC表中删除学号为201215121的所有数据</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-4-%E8%A7%86%E5%9B%BE%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="nav-text">2.5.4. 视图的操作</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-4-1-%E5%BB%BA%E7%AB%8B%E7%94%B7%E5%AD%A6%E7%94%9F%E7%9A%84%E8%A7%86%E5%9B%BE%EF%BC%8C%E5%B1%9E%E6%80%A7%E5%8C%85%E6%8B%AC%E5%AD%A6%E5%8F%B7%E3%80%81%E5%A7%93%E5%90%8D%E3%80%81%E9%80%89%E4%BF%AE%E8%AF%BE%E7%A8%8B%E5%90%8D%E5%92%8C%E6%88%90%E7%BB%A9"><span class="nav-text">2.5.4.1. 建立男学生的视图，属性包括学号、姓名、选修课程名和成绩</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-5-4-2-%E5%9C%A8%E7%94%B7%E5%AD%A6%E7%94%9F%E8%A7%86%E5%9B%BE%E4%B8%AD%E6%9F%A5%E8%AF%A2%E5%B9%B3%E5%9D%87%E6%88%90%E7%BB%A9%E5%A4%A7%E4%BA%8E80%E5%88%86%E7%9A%84%E5%AD%A6%E7%94%9F%E5%AD%A6%E5%8F%B7%E4%B8%8E%E5%A7%93%E5%90%8D"><span class="nav-text">2.5.4.2. 在男学生视图中查询平均成绩大于80分的学生学号与姓名</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E7%90%86%E8%AE%BA-%E8%8C%83%E5%BC%8F"><span class="nav-text">3. 关系数据库理论 - 范式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E6%95%B0%E6%8D%AE%E4%BE%9D%E8%B5%96"><span class="nav-text">3.1. 数据依赖</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-1-%E5%87%BD%E6%95%B0%E4%BE%9D%E8%B5%96"><span class="nav-text">3.1.1. 函数依赖</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-2-%E5%A4%9A%E5%80%BC%E4%BE%9D%E8%B5%96"><span class="nav-text">3.1.2. 多值依赖</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E7%A0%81"><span class="nav-text">3.2. 码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F-1NF"><span class="nav-text">3.3. 第一范式 - 1NF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F-2NF"><span class="nav-text">3.4. 第二范式 - 2NF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F-3NF"><span class="nav-text">3.5. 第三范式 - 3NF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-BCNF"><span class="nav-text">3.6. BCNF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-4NF"><span class="nav-text">3.7. 4NF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-%E6%95%B0%E6%8D%AE%E4%BE%9D%E8%B5%96%E7%9A%84%E5%85%AC%E7%90%86%E7%B3%BB%E7%BB%9F"><span class="nav-text">3.8. 数据依赖的公理系统</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E4%BA%8B%E5%8A%A1"><span class="nav-text">4. 事务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">4.1. 基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-%E4%BA%8B%E5%8A%A1%E7%9A%84ACID%E7%89%B9%E6%80%A7"><span class="nav-text">4.2. 事务的ACID特性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E5%B9%B6%E5%8F%91%E6%8E%A7%E5%88%B6"><span class="nav-text">5. 并发控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-%E5%B9%B6%E5%8F%91%E6%93%8D%E4%BD%9C%E5%8F%AF%E8%83%BD%E4%BA%A7%E7%94%9F%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">5.1. 并发操作可能产生的问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-%E5%B0%81%E9%94%81"><span class="nav-text">5.2. 封锁</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-%E5%B0%81%E9%94%81%E5%8D%8F%E8%AE%AE"><span class="nav-text">5.3. 封锁协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-1-%E4%B8%80%E7%BA%A7%E5%B0%81%E9%94%81%E5%8D%8F%E8%AE%AE"><span class="nav-text">5.3.1. 一级封锁协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-2-%E4%BA%8C%E7%BA%A7%E5%B0%81%E9%94%81%E5%8D%8F%E8%AE%AE"><span class="nav-text">5.3.2. 二级封锁协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-3-%E4%B8%89%E7%BA%A7%E5%B0%81%E9%94%81%E5%8D%8F%E8%AE%AE"><span class="nav-text">5.3.3. 三级封锁协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-4-%E4%B8%8D%E5%90%8C%E7%BA%A7%E5%88%AB%E7%9A%84%E5%B0%81%E9%94%81%E5%8D%8F%E8%AE%AE%E5%92%8C%E4%B8%80%E8%87%B4%E6%80%A7%E4%BF%9D%E8%AF%81"><span class="nav-text">5.3.4. 不同级别的封锁协议和一致性保证</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4-%E5%B9%B6%E5%8F%91%E8%B0%83%E5%BA%A6%E7%9A%84%E5%8F%AF%E4%B8%B2%E8%A1%8C%E6%80%A7"><span class="nav-text">5.4. 并发调度的可串行性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-%E4%B8%A4%E6%AE%B5%E9%94%81%E5%8D%8F%E8%AE%AE"><span class="nav-text">5.5. 两段锁协议</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="dounine"
      src="https://avatars.githubusercontent.com/u/41814469?s=400&u=48bf60a3428a3cb86a84a110c8688930cf6ceb08&v=4">
  <p class="site-author-name" itemprop="name">dounine</p>
  <div class="site-description" itemprop="description">回首向来萧瑟处</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">75</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">18</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">48</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/99MyCql" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;99MyCql" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll site-overview-item animated">
    <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://bkfish.gitee.io/" title="https:&#x2F;&#x2F;bkfish.gitee.io&#x2F;" rel="noopener" target="_blank">Kitty萌新的卧室</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://hitworld.github.io/" title="https:&#x2F;&#x2F;hitworld.github.io&#x2F;" rel="noopener" target="_blank">hirworld</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://wyjoutstanding.github.io/" title="https:&#x2F;&#x2F;wyjoutstanding.github.io&#x2F;" rel="noopener" target="_blank">wyjoutstanding</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://iwtf.github.io/" title="https:&#x2F;&#x2F;iwtf.github.io&#x2F;" rel="noopener" target="_blank">IWTF</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://wood1314.github.io/" title="https:&#x2F;&#x2F;wood1314.github.io&#x2F;" rel="noopener" target="_blank">wood</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://desperadoccy.github.io/" title="https:&#x2F;&#x2F;desperadoccy.github.io&#x2F;" rel="noopener" target="_blank">desperadoccy</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://doudouqaq.github.io/" title="https:&#x2F;&#x2F;doudouqaq.github.io&#x2F;" rel="noopener" target="_blank">doudouqaq</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://kylinnnnn.github.io/" title="https:&#x2F;&#x2F;kylinnnnn.github.io&#x2F;" rel="noopener" target="_blank">kylinnnnn</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://miaotony.xyz/" title="https:&#x2F;&#x2F;miaotony.xyz" rel="noopener" target="_blank">miaotony</a>
        </li>
    </ul>
  </div>

        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

  <a href="https://github.com/99MyCql" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://blog.dounine.live/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://avatars.githubusercontent.com/u/41814469?s=400&u=48bf60a3428a3cb86a84a110c8688930cf6ceb08&v=4">
      <meta itemprop="name" content="dounine">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="dounine's blog">
      <meta itemprop="description" content="回首向来萧瑟处">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="数据库复习小记 | dounine's blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          数据库复习小记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2020-07-06 09:48:28" itemprop="dateCreated datePublished" datetime="2020-07-06T09:48:28+08:00">2020-07-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Base/" itemprop="url" rel="index"><span itemprop="name">九层之台，起于累土</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Base/DataBase/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>[TOC]</p>
<h2 id="0-前言"><a href="#0-前言" class="headerlink" title="0. 前言"></a>0. 前言</h2><p>大三下，只剩一门数据库原理课程考试了，趁复习之际，我打算对数据库内容知识进行简单总结。</p>
<p>实习面试时，曾倍受不懂数据库之苦。虽然以前接触过MySQL等数据库，但并没有深入了解和研究，对其原理更是雾里看花。</p>
<p>而随着数据库原理课程步步深入的讲解，才终于揭开数据库神秘的面纱。</p>
<span id="more"></span>

<p>贯彻全文例子的数据表：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/4.png" alt="1"></p>
<h2 id="1-关系数据库"><a href="#1-关系数据库" class="headerlink" title="1. 关系数据库"></a>1. 关系数据库</h2><p><strong>关系数据库（Relational database）</strong>，是创建在关系模型基础上的数据库，借助于<strong>集合代数</strong>等数学概念和方法来处理数据库中的数据。</p>
<p>它于1970年由<strong>埃德加·科德（E.F.Codd）</strong>提出，开创了数据库系统的新纪元。</p>
<p>当今，很多传统数据库，都属于关系数据库，比如：MySQL、Oracle等。而redis等新型数据库，则是非关系型数据库。</p>
<p>关系模型分为三部分：</p>
<ul>
<li>关系数据结构</li>
<li>关系操作集合</li>
<li>关系完整性约束</li>
</ul>
<h3 id="1-1-关系"><a href="#1-1-关系" class="headerlink" title="1.1. 关系"></a>1.1. 关系</h3><p>关系模型的数据结构非常简单，即<strong>关系</strong>——一张扁平的二维表。</p>
<p>关系的定义如下：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/1.png" alt="1"></p>
<ul>
<li>关系的目或度<code>n</code>，即为二维表的列属性；</li>
<li>关系的元组<code>t</code>，即为二维表的行。</li>
</ul>
<h3 id="1-2-关系操作"><a href="#1-2-关系操作" class="headerlink" title="1.2. 关系操作"></a>1.2. 关系操作</h3><p>增删改查，其中查询最为关键和复杂。</p>
<p>早期的关系查询操作通常用<strong>代数方式</strong>或<strong>逻辑方式</strong>表示，分别称为<strong>关系代数</strong>和<strong>关系演算</strong>。</p>
<p>后来，出现了一种介于关系代数和关系演算之间的<strong>结构化查询语言（SQL）</strong>。</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/2.png" alt="1"></p>
<h3 id="1-3-关系的完整性"><a href="#1-3-关系的完整性" class="headerlink" title="1.3. 关系的完整性"></a>1.3. 关系的完整性</h3><p>关系模型的完整性约束分为三类：</p>
<ul>
<li>实体完整性，即主键。</li>
<li>参照完整性，即外键。</li>
<li>用户定义的完整性，即<code>NOT NULL</code>等。</li>
</ul>
<h3 id="1-4-关系代数"><a href="#1-4-关系代数" class="headerlink" title="1.4. 关系代数"></a>1.4. 关系代数</h3><p>关系代数是一种抽象的查询语言，用对关系的运算来表达查询。其运算符如下：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/3.png" alt="1"></p>
<p>具体知识点不予介绍，关系代数示例如下：</p>
<ul>
<li>1 查询年龄不等于20岁的学生信息</li>
</ul>
<p>$\sigma_{Sage!&#x3D;20}(Student)$</p>
<ul>
<li>2 查询选修1号课程的学生学号</li>
</ul>
<p>$\pi_{Sno}(\sigma_{Cno&#x3D;1}(SC))$</p>
<ul>
<li>3 查询既选修1号课程又选修2号课程的学生学号</li>
</ul>
<p>$\pi_{Sno}(\sigma_{Cno&#x3D;1}(SC)) \bigcap \pi_{Sno}(\sigma_{Cno&#x3D;2}(SC))$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">select</span> sno <span class="keyword">from</span> sc <span class="keyword">where</span> cno<span class="operator">=</span><span class="number">1</span>)</span><br><span class="line"><span class="keyword">intersect</span></span><br><span class="line">(<span class="keyword">select</span> sno <span class="keyword">from</span> sc <span class="keyword">where</span> cno<span class="operator">=</span><span class="number">2</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>4 查询不选1号课程的学生学号</li>
</ul>
<p>$\pi_{Sno}(Student) - \pi_{Sno}(\sigma_{Cno&#x3D;1}(SC))$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno <span class="keyword">from</span> student</span><br><span class="line">minus</span><br><span class="line"><span class="keyword">select</span> sno <span class="keyword">from</span> sc <span class="keyword">where</span> cno<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>查询所有课程成绩大于等于85分的学生学号</p>
<p>$\pi_{Sno}(SC) - \pi_{Sno}(\sigma_{Grade&lt;85}(SC))$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">select</span> sno <span class="keyword">from</span> sc)</span><br><span class="line">minus</span><br><span class="line">(<span class="keyword">select</span> sno <span class="keyword">from</span> sc <span class="keyword">where</span> grade <span class="operator">&lt;</span> <span class="number">85</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>5 查询选修1号课程的学生学号和姓名</li>
</ul>
<p>$\pi_{Sno,Sname}(\sigma_{Cno&#x3D;1}(SC \times Student)$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.sno, student.sname</span><br><span class="line"><span class="keyword">from</span> sc <span class="keyword">cross</span> <span class="keyword">join</span> student</span><br><span class="line"><span class="keyword">where</span> sc.cno<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<p>$\pi_{Sno,Sname}(\sigma_{Cno&#x3D;1}(SC \bowtie Student))$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> student.sno, student.sname</span><br><span class="line"><span class="keyword">from</span> sc <span class="keyword">join</span> student <span class="keyword">on</span> sc.sno<span class="operator">=</span>student.sno</span><br><span class="line"><span class="keyword">where</span> cno<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>6 查询所有选课成绩均及格的学生学号和姓名</li>
</ul>
<p>$\pi_{Sno,Sname}(\sigma_{Grade \geq 60}(SC \bowtie Student))$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno, sname <span class="keyword">from</span> student <span class="keyword">natural</span> <span class="keyword">join</span> sc <span class="keyword">where</span> grade <span class="operator">&gt;=</span> <span class="number">60</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>7 查询选修了全部课程的学生学号和姓名</li>
</ul>
<p>$(\pi_{Sno,Cno}(SC) \div \pi_{Cno}(Course)) \bowtie \pi_{Sno, Sname}(Student)$</p>
<ul>
<li>8 查询至少选修2门不同课程的学生学号</li>
</ul>
<p>$\pi_{Sno}(\sigma_{SC1.Sno &#x3D; SC2.Sno \bigwedge SC1.Cno!&#x3D;SC2.Cno}(SC1 \times SC2))$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno, <span class="built_in">count</span>(cno) con_count</span><br><span class="line"><span class="keyword">from</span> SC</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sno</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(cno) <span class="operator">&gt;=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>9 查询选课成绩最高的学生学号和成绩</li>
</ul>
<p>$X &#x3D; \pi_{Grade}(SC) - \pi_{SC1.Grade}(SC1 \bowtie_{SC1.Grade &lt; SC2.Grade} SC2)$<br>$\pi_{Sno, Grade}(X \bowtie SC)$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno, grade</span><br><span class="line"><span class="keyword">from</span> SC</span><br><span class="line"><span class="keyword">where</span> grade<span class="operator">=</span>(</span><br><span class="line">    <span class="keyword">select</span> <span class="built_in">max</span>(grade) <span class="keyword">from</span> SC</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li>1 查询所有男同学的信息</li>
</ul>
<p>$\sigma_{Ssex&#x3D;’男’}(Student)$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">where</span> ssex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>2 查询选修1号或2号课程的学生选课信息</li>
</ul>
<p>$\sigma_{Cno&#x3D;1 \bigvee Cno&#x3D;2}(SC)$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> sc <span class="keyword">where</span> cno<span class="operator">=</span><span class="number">1</span> <span class="keyword">or</span> cno<span class="operator">=</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>3 查询计算机系（CS）的男同学的学号和姓名</li>
</ul>
<p>$\pi_{Sno, Sname}(\sigma_{Ssex&#x3D;’男’ \bigwedge Sdept&#x3D;’CS’}(Student)))$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno, sname <span class="keyword">from</span> student <span class="keyword">where</span> ssex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span> <span class="keyword">and</span> sdept<span class="operator">=</span><span class="string">&#x27;CS&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>4 查询选修“数据库”课程的学生学号</li>
</ul>
<p>$\pi_{Sno}(\sigma_{Cname&#x3D;’数据库’}(Course \bowtie SC))$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno</span><br><span class="line"><span class="keyword">from</span> Course <span class="keyword">join</span> SC <span class="keyword">on</span> Course.cno<span class="operator">=</span>SC.cno</span><br><span class="line"><span class="keyword">where</span> Course.cname<span class="operator">=</span><span class="string">&#x27;数据库&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>5 查询选修“数据库”课程的学生学号和姓名</li>
</ul>
<p>$\pi_{Sno, Sname}(\sigma_{Cname&#x3D;’数据库’}(Course \bowtie SC \bowtie Student))$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno,sname</span><br><span class="line"><span class="keyword">from</span> course <span class="keyword">natural</span> <span class="keyword">join</span> sc <span class="keyword">natural</span> <span class="keyword">join</span> student</span><br><span class="line"><span class="keyword">where</span> cname<span class="operator">=</span><span class="string">&#x27;数据库&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>6 查询没有选修全部课程的学生学号</li>
</ul>
<p>$\pi_{Sno}(\pi_{Sno,Cno}(Student \times Course) - \pi_{Sno,Cno}(SC))$</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> sno <span class="keyword">from</span></span><br><span class="line">(<span class="keyword">select</span> sno, cno <span class="keyword">from</span> student <span class="keyword">cross</span> <span class="keyword">join</span> course</span><br><span class="line">minus</span><br><span class="line"><span class="keyword">select</span> sno, cno <span class="keyword">from</span> sc);</span><br></pre></td></tr></table></figure>

<p>$\pi_{Sno}(Student) - (\pi_{Sno, Cno}(SC) \div \pi_{Cno}(Course))$</p>
<ul>
<li>7 查询没有选修全部课程的学生学号和姓名</li>
</ul>
<p>$\pi_{Sno}(\pi_{Sno,Cno}(Student \times Course) - \pi_{Sno,Cno}(SC)) \bowtie \pi_{Sno, Sname}(Student)$</p>
<p>$(\pi_{Sno}(Student) - (\pi_{Sno, Cno}(SC) \div \pi_{Cno}(Course))) \bowtie \pi_{Sno, Sname}(Student)$</p>
<h3 id="1-5-关系演算"><a href="#1-5-关系演算" class="headerlink" title="1.5. 关系演算"></a>1.5. 关系演算</h3><p>关系演算则以数理逻辑中的谓词演算为基础。</p>
<p>具体内容不做介绍。示例如下：</p>
<ul>
<li>1 试用元组关系演算语言ALPHA完成：查询计算机系（CS）的男同学的学号和姓名</li>
</ul>
<p>$GET \ W (Student.Sno, Student.Sname): Student.Sdept&#x3D;’CS’ \bigwedge Student.Ssex&#x3D;’男’$</p>
<ul>
<li>2 试用元组关系演算语言ALPHA完成：查询选修“数据库”课程的学生学号</li>
</ul>
<p>$RANGE \ Course \ CX$<br>$GET \ W (SC.Sno): \exists CX (CX.Cno&#x3D;SC.Cno \bigwedge CX.Cname&#x3D;’数据库’)$</p>
<ul>
<li>3 试用元组关系演算语言ALPHA完成：查询所有选课成绩均及格的学生学号和姓名</li>
</ul>
<p>$RANGE \ SC \ SCX$<br>$GET \ W (Student.Sno, Student.Sname): \forall SCX (SCX.Sno&#x3D;Student.Sno \Longrightarrow SCX.Grade&gt;&#x3D;60)$</p>
<p>正确：</p>
<p>$RANGE \ SC \ SCX$<br>$GET \ W (Student.Sno, Student.Sname): \exist SCX (SCX.Sno &#x3D; Student.Sno) \bigwedge \forall SCX (SCX.Sno&#x3D;Student.Sno \Longrightarrow SCX.Grade&gt;&#x3D;60)$</p>
<ul>
<li>4 试用元组关系演算语言ALPHA完成：查询有两个人以上选修的课程号和课程名</li>
</ul>
<p>$RANGE \ SC \ SCX$<br>$\quad \quad \quad \quad \ SC \ SCY$<br>$GET \ W (Course.Cno, Course.Cname): \exist SCX \ \exist SCY (SCX.Cno&#x3D;Course.Cno \bigwedge SCY.Cno&#x3D;SCX.Cno \bigwedge SCX.Sno \neq SCY.Sno)$</p>
<h2 id="2-关系数据库标准语言-SQL"><a href="#2-关系数据库标准语言-SQL" class="headerlink" title="2. 关系数据库标准语言 SQL"></a>2. 关系数据库标准语言 SQL</h2><h3 id="2-1-数据定义"><a href="#2-1-数据定义" class="headerlink" title="2.1. 数据定义"></a>2.1. 数据定义</h3><p>包括模式（库）、表、视图、索引的增删改：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/5.png" alt="1"></p>
<h3 id="2-2-数据查询"><a href="#2-2-数据查询" class="headerlink" title="2.2. 数据查询"></a>2.2. 数据查询</h3><p>主要为<code>select</code>语句，<code>select</code>为SQL语句的重中之重，包括<strong>单表查询</strong>、<strong>连接查询</strong>、<strong>嵌套查询</strong>、<strong>集合查询</strong>、<strong>基于派生表查询</strong>等主要内容。</p>
<p>其一般格式如下：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/6.png" alt="1"><br><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/7.png" alt="1"></p>
<h3 id="2-3-数据更新"><a href="#2-3-数据更新" class="headerlink" title="2.3. 数据更新"></a>2.3. 数据更新</h3><p>主要为<code>insert</code>、<code>update</code>、<code>delete</code>语句。</p>
<p>较为简单，不予详说。</p>
<h3 id="2-4-视图"><a href="#2-4-视图" class="headerlink" title="2.4. 视图"></a>2.4. 视图</h3><p>视图是建立在查询语句上的一张虚拟表，可直接查询视图，查询时会自动执行视图定义中的查询语句。</p>
<p>视图可以有创建、增删改查操作。</p>
<p>视图创建格式如下：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/8.png" alt="1"></p>
<p>增删改查则与普通表相同。</p>
<h3 id="2-5-SQL-示例"><a href="#2-5-SQL-示例" class="headerlink" title="2.5. SQL 示例"></a>2.5. SQL 示例</h3><h4 id="2-5-1-SQL定义功能、数据插入"><a href="#2-5-1-SQL定义功能、数据插入" class="headerlink" title="2.5.1. SQL定义功能、数据插入"></a>2.5.1. SQL定义功能、数据插入</h4><h5 id="2-5-1-1-建立教学数据库的三个基本表"><a href="#2-5-1-1-建立教学数据库的三个基本表" class="headerlink" title="2.5.1.1. 建立教学数据库的三个基本表"></a>2.5.1.1. 建立教学数据库的三个基本表</h5><p>S(Sno,Sname,Sgender,Sage,Sdept) 学生（学号，姓名，性别，年龄，系）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> S (</span><br><span class="line">   Sno <span class="type">char</span>(<span class="number">9</span>) <span class="keyword">primary</span> key,</span><br><span class="line">   Sname <span class="type">char</span>(<span class="number">20</span>) <span class="keyword">unique</span>,</span><br><span class="line">   Ssex <span class="type">char</span>(<span class="number">2</span>),</span><br><span class="line">   Sage <span class="type">smallint</span>,</span><br><span class="line">   Sdept <span class="type">char</span>(<span class="number">20</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>SC(Sno,Cno,Grade) 选课（学号，课程号，成绩）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> SC (</span><br><span class="line">   Sno <span class="type">char</span>(<span class="number">9</span>),</span><br><span class="line">   Cno <span class="type">char</span>(<span class="number">4</span>),</span><br><span class="line">   Grade <span class="type">smallint</span>,</span><br><span class="line">   <span class="keyword">primary</span> key (Sno, Cno),</span><br><span class="line">   <span class="keyword">foreign</span> key (Sno) <span class="keyword">references</span> S(Sno),</span><br><span class="line">   <span class="keyword">foreign</span> key (Cno) <span class="keyword">references</span> C(Cno)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>C(Cno,Cname,Cpno,Ccredit) 课程（课程号，课程名，先行课，学分）</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> C (</span><br><span class="line">   Cno <span class="type">char</span>(<span class="number">4</span>) <span class="keyword">primary</span> key,</span><br><span class="line">   Cname <span class="type">char</span>(<span class="number">40</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">   Cpno <span class="type">char</span>(<span class="number">4</span>),</span><br><span class="line">   Ccredit <span class="type">smallint</span>,</span><br><span class="line">   <span class="keyword">foreign</span> key(Cpno) <span class="keyword">references</span> C(Cno)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="2-5-1-2-DROP-TABLE、ALTER-TABLE、CREATE-INDEX、DROP-INDEX-及INSERT语句输入数据"><a href="#2-5-1-2-DROP-TABLE、ALTER-TABLE、CREATE-INDEX、DROP-INDEX-及INSERT语句输入数据" class="headerlink" title="2.5.1.2. DROP TABLE、ALTER TABLE、CREATE INDEX、DROP INDEX 及INSERT语句输入数据"></a>2.5.1.2. DROP TABLE、ALTER TABLE、CREATE INDEX、DROP INDEX 及INSERT语句输入数据</h5><p>删除表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> SC;</span><br></pre></td></tr></table></figure>

<p>修改表：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> C <span class="keyword">ADD</span> <span class="keyword">UNIQUE</span>(Cname);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> S MODIFY(Ssex <span class="type">char</span>(<span class="number">4</span>));</span><br></pre></td></tr></table></figure>

<p>创建索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> INDEX SCno <span class="keyword">ON</span> SC(Sno <span class="keyword">ASC</span>, Cno <span class="keyword">DESC</span>);</span><br></pre></td></tr></table></figure>

<p>删除索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> INDEX SCno;</span><br></pre></td></tr></table></figure>

<p>插入数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> S <span class="keyword">values</span>(<span class="number">201215121</span>,<span class="string">&#x27;李勇&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">20</span>,<span class="string">&#x27;CS&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> S <span class="keyword">values</span>(<span class="number">201215122</span>,<span class="string">&#x27;刘晨&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">19</span>,<span class="string">&#x27;CS&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> S <span class="keyword">values</span>(<span class="number">201215123</span>,<span class="string">&#x27;王敏&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">18</span>,<span class="string">&#x27;MA&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> S <span class="keyword">values</span>(<span class="number">201215125</span>,<span class="string">&#x27;张立&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="number">19</span>,<span class="string">&#x27;IS&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> C <span class="keyword">values</span>(<span class="number">2</span>,<span class="string">&#x27;数学&#x27;</span>,<span class="keyword">null</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> C <span class="keyword">values</span>(<span class="number">6</span>,<span class="string">&#x27;数据处理&#x27;</span>,<span class="keyword">null</span>,<span class="number">2</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> C <span class="keyword">values</span>(<span class="number">7</span>,<span class="string">&#x27;PASCAL语言&#x27;</span>,<span class="number">6</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> C <span class="keyword">values</span>(<span class="number">5</span>,<span class="string">&#x27;数据结构&#x27;</span>,<span class="number">7</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> C <span class="keyword">values</span>(<span class="number">1</span>,<span class="string">&#x27;数据库&#x27;</span>,<span class="number">5</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> C <span class="keyword">values</span>(<span class="number">3</span>,<span class="string">&#x27;信息系统&#x27;</span>,<span class="number">1</span>,<span class="number">4</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> C <span class="keyword">values</span>(<span class="number">4</span>,<span class="string">&#x27;操作系统&#x27;</span>,<span class="number">6</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SC <span class="keyword">values</span>(<span class="number">201215121</span>,<span class="number">1</span>,<span class="number">92</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SC <span class="keyword">values</span>(<span class="number">201215121</span>,<span class="number">2</span>,<span class="number">85</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SC <span class="keyword">values</span>(<span class="number">201215121</span>,<span class="number">3</span>,<span class="number">88</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SC <span class="keyword">values</span>(<span class="number">201215122</span>,<span class="number">2</span>,<span class="number">90</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SC <span class="keyword">values</span>(<span class="number">201215122</span>,<span class="number">3</span>,<span class="number">80</span>);</span><br></pre></td></tr></table></figure>

<h4 id="2-5-2-数据查询"><a href="#2-5-2-数据查询" class="headerlink" title="2.5.2. 数据查询"></a>2.5.2. 数据查询</h4><h5 id="2-5-2-1．查询选修1号课程的学生学号与姓名"><a href="#2-5-2-1．查询选修1号课程的学生学号与姓名" class="headerlink" title="2.5.2.1．查询选修1号课程的学生学号与姓名"></a>2.5.2.1．查询选修1号课程的学生学号与姓名</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> S.Sno, S.Sname</span><br><span class="line"><span class="keyword">from</span> S, SC</span><br><span class="line"><span class="keyword">where</span> S.Sno<span class="operator">=</span>SC.Sno <span class="keyword">and</span> SC.Cno<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h5 id="2-5-2-2．查询选修课程名为数据库的学生学号与姓名"><a href="#2-5-2-2．查询选修课程名为数据库的学生学号与姓名" class="headerlink" title="2.5.2.2．查询选修课程名为数据库的学生学号与姓名"></a>2.5.2.2．查询选修课程名为数据库的学生学号与姓名</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> S.Sno, S.Sname</span><br><span class="line"><span class="keyword">from</span> S, SC, C</span><br><span class="line"><span class="keyword">where</span> S.Sno<span class="operator">=</span>SC.Sno <span class="keyword">and</span> SC.Cno<span class="operator">=</span>C.Cno <span class="keyword">and</span> C.Cname<span class="operator">=</span><span class="string">&#x27;数据库&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h5 id="2-5-2-3．查询不选1号课程的学生学号与姓名"><a href="#2-5-2-3．查询不选1号课程的学生学号与姓名" class="headerlink" title="2.5.2.3．查询不选1号课程的学生学号与姓名"></a>2.5.2.3．查询不选1号课程的学生学号与姓名</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">select</span> S.sno, S.sname</span><br><span class="line"><span class="keyword">from</span> S)</span><br><span class="line">minus</span><br><span class="line">(<span class="keyword">select</span> S.sno, S.sname</span><br><span class="line"><span class="keyword">from</span> S, SC</span><br><span class="line"><span class="keyword">where</span> S.sno<span class="operator">=</span>SC.sno <span class="keyword">and</span> SC.cno<span class="operator">=</span><span class="number">1</span>);</span><br></pre></td></tr></table></figure>

<h5 id="2-5-2-4．查询学习全部课程学生姓名"><a href="#2-5-2-4．查询学习全部课程学生姓名" class="headerlink" title="2.5.2.4．查询学习全部课程学生姓名"></a>2.5.2.4．查询学习全部课程学生姓名</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Sname <span class="keyword">from</span> S <span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">   <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> C <span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">      <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SC <span class="keyword">where</span> Sno<span class="operator">=</span>S.Sno <span class="keyword">and</span> Cno<span class="operator">=</span>C.Cno));</span><br></pre></td></tr></table></figure>

<h5 id="2-5-2-5．查询所有学生除了选修1号课程外所有成绩均及格的学生的学号和平均成绩，其结果按平均成绩的降序排列"><a href="#2-5-2-5．查询所有学生除了选修1号课程外所有成绩均及格的学生的学号和平均成绩，其结果按平均成绩的降序排列" class="headerlink" title="2.5.2.5．查询所有学生除了选修1号课程外所有成绩均及格的学生的学号和平均成绩，其结果按平均成绩的降序排列"></a>2.5.2.5．查询所有学生除了选修1号课程外所有成绩均及格的学生的学号和平均成绩，其结果按平均成绩的降序排列</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno, <span class="built_in">avg</span>(grade) <span class="keyword">from</span> (</span><br><span class="line">   <span class="keyword">select</span> S.sno, SC.grade <span class="keyword">from</span> S, SC</span><br><span class="line">   <span class="keyword">where</span> S.sno<span class="operator">=</span>SC.sno <span class="keyword">and</span> SC.cno<span class="operator">!=</span><span class="number">1</span> <span class="keyword">and</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">      <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SC <span class="keyword">where</span> sno<span class="operator">=</span>S.sno <span class="keyword">and</span> cno<span class="operator">!=</span><span class="number">1</span> <span class="keyword">and</span> grade<span class="operator">&lt;</span><span class="number">60</span></span><br><span class="line">   )</span><br><span class="line">)</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sno</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">avg</span>(grade) <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<h5 id="2-5-2-6．查询选修数据库成绩第2名的学生姓名"><a href="#2-5-2-6．查询选修数据库成绩第2名的学生姓名" class="headerlink" title="2.5.2.6．查询选修数据库成绩第2名的学生姓名"></a>2.5.2.6．查询选修数据库成绩第2名的学生姓名</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> S.sname, SC.grade</span><br><span class="line"><span class="keyword">from</span> S, SC, C</span><br><span class="line"><span class="keyword">where</span> S.sno<span class="operator">=</span>SC.sno <span class="keyword">and</span> C.cno<span class="operator">=</span>SC.cno <span class="keyword">and</span> C.cname<span class="operator">=</span><span class="string">&#x27;数据库&#x27;</span> <span class="keyword">and</span> SC.grade <span class="keyword">in</span> (</span><br><span class="line">   <span class="keyword">select</span> <span class="built_in">max</span>(SC.grade)</span><br><span class="line">   <span class="keyword">from</span> SC, C</span><br><span class="line">   <span class="keyword">where</span> C.cno<span class="operator">=</span>SC.cno <span class="keyword">and</span> C.cname<span class="operator">=</span><span class="string">&#x27;数据库&#x27;</span> <span class="keyword">and</span> SC.grade <span class="keyword">not</span> <span class="keyword">in</span> (</span><br><span class="line">      <span class="keyword">select</span> <span class="built_in">max</span>(SC.grade)</span><br><span class="line">      <span class="keyword">from</span> SC, C</span><br><span class="line">      <span class="keyword">where</span> C.cno<span class="operator">=</span>SC.cno <span class="keyword">and</span> C.cname<span class="operator">=</span><span class="string">&#x27;数据库&#x27;</span></span><br><span class="line">   )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="2-5-2-7-查询所有3个学分课程中有3门以上（含3门）课程获80分以上（含80分）的学生的姓名"><a href="#2-5-2-7-查询所有3个学分课程中有3门以上（含3门）课程获80分以上（含80分）的学生的姓名" class="headerlink" title="2.5.2.7. 查询所有3个学分课程中有3门以上（含3门）课程获80分以上（含80分）的学生的姓名"></a>2.5.2.7. 查询所有3个学分课程中有3门以上（含3门）课程获80分以上（含80分）的学生的姓名</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> S.sname, <span class="built_in">count</span>(SC.cno)</span><br><span class="line"><span class="keyword">from</span> S, SC, C</span><br><span class="line"><span class="keyword">where</span> S.sno<span class="operator">=</span>SC.sno <span class="keyword">and</span> SC.cno<span class="operator">=</span>C.cno <span class="keyword">and</span> C.ccredit<span class="operator">=</span><span class="number">3</span> <span class="keyword">and</span> SC.grade<span class="operator">&gt;=</span><span class="number">80</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> S.sname</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(SC.cno)<span class="operator">&gt;=</span><span class="number">3</span>;</span><br></pre></td></tr></table></figure>

<h5 id="2-5-2-8-查询选课门数唯一的学生的学号"><a href="#2-5-2-8-查询选课门数唯一的学生的学号" class="headerlink" title="2.5.2.8. 查询选课门数唯一的学生的学号"></a>2.5.2.8. 查询选课门数唯一的学生的学号</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> (</span><br><span class="line">   <span class="keyword">select</span> sno, <span class="built_in">count</span>(cno) ccount</span><br><span class="line">   <span class="keyword">from</span> SC</span><br><span class="line">   <span class="keyword">group</span> <span class="keyword">by</span> sno</span><br><span class="line">) SC_count1</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">not</span> <span class="keyword">exists</span> (</span><br><span class="line">   <span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line">   <span class="keyword">from</span> (</span><br><span class="line">      <span class="keyword">select</span> sno, <span class="built_in">count</span>(cno) ccount</span><br><span class="line">      <span class="keyword">from</span> SC</span><br><span class="line">      <span class="keyword">group</span> <span class="keyword">by</span> sno</span><br><span class="line">   ) SC_count2</span><br><span class="line">   <span class="keyword">where</span> sno<span class="operator">!=</span>SC_count1.sno <span class="keyword">and</span> ccount<span class="operator">=</span>SC_count1.ccount</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="2-5-2-9-SELECT语句中各种查询条件的实验"><a href="#2-5-2-9-SELECT语句中各种查询条件的实验" class="headerlink" title="2.5.2.9. SELECT语句中各种查询条件的实验"></a>2.5.2.9. SELECT语句中各种查询条件的实验</h5><ul>
<li><code>between</code></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Sno, Sname, Sage <span class="keyword">from</span> S <span class="keyword">where</span> Sage <span class="keyword">between</span> <span class="number">19</span> <span class="keyword">and</span> <span class="number">20</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>in</code></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Sno, Sname, Sdept <span class="keyword">from</span> S <span class="keyword">where</span> Sdept <span class="keyword">in</span> (<span class="string">&#x27;CS&#x27;</span>, <span class="string">&#x27;IS&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li><code>like</code></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> Sno, Sname, Ssex <span class="keyword">from</span> S <span class="keyword">where</span> Sname <span class="keyword">like</span> <span class="string">&#x27;刘%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>is NULL</code> &#x2F; <code>is not NULL</code></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> C <span class="keyword">where</span> Cpno <span class="keyword">is</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> C <span class="keyword">where</span> Cpno <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li><code>&lt; any</code> &#x2F; <code>&gt;= all</code></li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SC <span class="keyword">where</span> grade <span class="operator">&lt;</span> <span class="keyword">any</span> (<span class="keyword">select</span> grade <span class="keyword">from</span> SC);</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> SC <span class="keyword">where</span> grade <span class="operator">&gt;=</span> <span class="keyword">all</span> (<span class="keyword">select</span> grade <span class="keyword">from</span> SC);</span><br></pre></td></tr></table></figure>

<h4 id="2-5-3-数据修改、删除"><a href="#2-5-3-数据修改、删除" class="headerlink" title="2.5.3. 数据修改、删除"></a>2.5.3. 数据修改、删除</h4><h5 id="2-5-3-1-把1号课程的非空成绩提高10％"><a href="#2-5-3-1-把1号课程的非空成绩提高10％" class="headerlink" title="2.5.3.1. 把1号课程的非空成绩提高10％"></a>2.5.3.1. 把1号课程的非空成绩提高10％</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> SC <span class="keyword">set</span> grade<span class="operator">=</span>grade<span class="operator">*</span><span class="number">1.1</span> <span class="keyword">where</span> cno<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> grade <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<h5 id="2-5-3-2-在SC表中删除课程名为数据库的成绩的元组"><a href="#2-5-3-2-在SC表中删除课程名为数据库的成绩的元组" class="headerlink" title="2.5.3.2. 在SC表中删除课程名为数据库的成绩的元组"></a>2.5.3.2. 在SC表中删除课程名为数据库的成绩的元组</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> SC <span class="keyword">where</span> cno <span class="keyword">in</span> (</span><br><span class="line">   <span class="keyword">select</span> cno <span class="keyword">from</span> C <span class="keyword">where</span> cname<span class="operator">=</span><span class="string">&#x27;数据库&#x27;</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h5 id="2-5-3-3-在S和SC表中删除学号为201215121的所有数据"><a href="#2-5-3-3-在S和SC表中删除学号为201215121的所有数据" class="headerlink" title="2.5.3.3. 在S和SC表中删除学号为201215121的所有数据"></a>2.5.3.3. 在S和SC表中删除学号为201215121的所有数据</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> SC <span class="keyword">where</span> sno<span class="operator">=</span><span class="number">201215121</span>;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> S <span class="keyword">where</span> sno<span class="operator">=</span><span class="number">201215121</span>;</span><br></pre></td></tr></table></figure>

<h4 id="2-5-4-视图的操作"><a href="#2-5-4-视图的操作" class="headerlink" title="2.5.4. 视图的操作"></a>2.5.4. 视图的操作</h4><h5 id="2-5-4-1-建立男学生的视图，属性包括学号、姓名、选修课程名和成绩"><a href="#2-5-4-1-建立男学生的视图，属性包括学号、姓名、选修课程名和成绩" class="headerlink" title="2.5.4.1. 建立男学生的视图，属性包括学号、姓名、选修课程名和成绩"></a>2.5.4.1. 建立男学生的视图，属性包括学号、姓名、选修课程名和成绩</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">view</span> S_SC_C_man</span><br><span class="line"><span class="keyword">as</span></span><br><span class="line"><span class="keyword">select</span> S.sno, S.sname, C.cname, SC.grade</span><br><span class="line"><span class="keyword">from</span> S, SC, C</span><br><span class="line"><span class="keyword">where</span> S.sno<span class="operator">=</span>SC.sno <span class="keyword">and</span> SC.cno<span class="operator">=</span>C.cno;</span><br></pre></td></tr></table></figure>

<h5 id="2-5-4-2-在男学生视图中查询平均成绩大于80分的学生学号与姓名"><a href="#2-5-4-2-在男学生视图中查询平均成绩大于80分的学生学号与姓名" class="headerlink" title="2.5.4.2. 在男学生视图中查询平均成绩大于80分的学生学号与姓名"></a>2.5.4.2. 在男学生视图中查询平均成绩大于80分的学生学号与姓名</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> sno, sname</span><br><span class="line"><span class="keyword">from</span> S_SC_C_man</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> sno,sname</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">avg</span>(grade)<span class="operator">&gt;</span><span class="number">80</span>;</span><br></pre></td></tr></table></figure>

<h2 id="3-关系数据库理论-范式"><a href="#3-关系数据库理论-范式" class="headerlink" title="3. 关系数据库理论 - 范式"></a>3. 关系数据库理论 - 范式</h2><p>关系数据理论主要讨论：如何设计一个好的数据库模式，即如何构造一个好的数据表。主要方法是：使用范式对表进行规范化。</p>
<p>在引出范式之前，需要讨论一下数据依赖和码的概念。</p>
<h3 id="3-1-数据依赖"><a href="#3-1-数据依赖" class="headerlink" title="3.1. 数据依赖"></a>3.1. 数据依赖</h3><p>数据依赖是一个关系内部属性与属性之间的一种约束关系，其中最重要的是：</p>
<ul>
<li><strong>函数依赖（FD）</strong></li>
<li><strong>多值依赖（MVD）</strong></li>
</ul>
<h4 id="3-1-1-函数依赖"><a href="#3-1-1-函数依赖" class="headerlink" title="3.1.1. 函数依赖"></a>3.1.1. 函数依赖</h4><p>函数依赖：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/9.png" alt="1"></p>
<p>完全函数依赖、部分函数依赖、传递函数依赖：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/10.png" alt="1"></p>
<h4 id="3-1-2-多值依赖"><a href="#3-1-2-多值依赖" class="headerlink" title="3.1.2. 多值依赖"></a>3.1.2. 多值依赖</h4><p>示例：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/11.png" alt="1"></p>
<p>定义：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/12.png" alt="1"></p>
<h3 id="3-2-码"><a href="#3-2-码" class="headerlink" title="3.2. 码"></a>3.2. 码</h3><p>候选码、超码、主码、全码：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/13.png" alt="1"></p>
<p><strong>注意：所有属性都完全函数依赖于候选码</strong>。</p>
<p>外码：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/14.png" alt="1"></p>
<h3 id="3-3-第一范式-1NF"><a href="#3-3-第一范式-1NF" class="headerlink" title="3.3. 第一范式 - 1NF"></a>3.3. 第一范式 - 1NF</h3><p>定义：<strong>每个属性必须是不可分的数据项</strong>。</p>
<p>第一范式是关系的基本条件。</p>
<h3 id="3-4-第二范式-2NF"><a href="#3-4-第二范式-2NF" class="headerlink" title="3.4. 第二范式 - 2NF"></a>3.4. 第二范式 - 2NF</h3><p>定义：**若关系模式 $R \in 1NF$，且每一个非主属性完全函数依赖于任何一个候选码，则 $R \in 2NF$**。</p>
<p>简而言之：<strong>不存在非主属性对码的部分函数依赖</strong>。</p>
<h3 id="3-5-第三范式-3NF"><a href="#3-5-第三范式-3NF" class="headerlink" title="3.5. 第三范式 - 3NF"></a>3.5. 第三范式 - 3NF</h3><p>定义：**若关系模式 $R \in 1NF$，且不存在这样的码 $X$、属性组 $Y(Y \not\rightarrow X)$ 及非主属性 $Z(Z \not\subseteq Y)$，使得 $X \rightarrow Y, Y \rightarrow Z$ 成立，则 $R \in 3NF$**。</p>
<p>简而言之：<strong>不存在非主属性对码的函数传递依赖</strong>。</p>
<h3 id="3-6-BCNF"><a href="#3-6-BCNF" class="headerlink" title="3.6. BCNF"></a>3.6. BCNF</h3><p>定义：**关系模式$R \in 1NF$，若 $X \rightarrow Y$ 且 $Y \not\subseteq X$ 时 $X$ 必含有码，则$R \in BCNF$**。</p>
<h3 id="3-7-4NF"><a href="#3-7-4NF" class="headerlink" title="3.7. 4NF"></a>3.7. 4NF</h3><p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/16.png" alt="1"></p>
<h3 id="3-8-数据依赖的公理系统"><a href="#3-8-数据依赖的公理系统" class="headerlink" title="3.8. 数据依赖的公理系统"></a>3.8. 数据依赖的公理系统</h3><p>数据依赖的公理系统是模式分解算法的理论基础，下面介绍一个有效而完备的公理系统——Armstrong公理系统。</p>
<p>逻辑蕴含：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/17.png" alt="1"></p>
<p>Armstrong公理系统的推理规则：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/18.png" alt="1"><br><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/19.png" alt="1"></p>
<p>最小依赖集：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/20.png" alt="1"></p>
<h2 id="4-事务"><a href="#4-事务" class="headerlink" title="4. 事务"></a>4. 事务</h2><h3 id="4-1-基本概念"><a href="#4-1-基本概念" class="headerlink" title="4.1. 基本概念"></a>4.1. 基本概念</h3><p><strong>事务是用户定义的一个数据库操作序列，这些操作要么全做，要么全部做，是一个不可分割的单位</strong>。</p>
<p>事务通常以 <code>BEGIN TRANSACTION</code> 开始，以 <code>COMMIT</code>（提交，提交事务的所有操作）或 <code>ROLLBACK</code>（回滚，撤销事务中所有已完成的操作）结束。</p>
<h3 id="4-2-事务的ACID特性"><a href="#4-2-事务的ACID特性" class="headerlink" title="4.2. 事务的ACID特性"></a>4.2. 事务的ACID特性</h3><p>事务具有4个特性：</p>
<ul>
<li><p><strong>原子性（Atomicity）</strong>，事务中的所有操作要么都做，要么都不做。</p>
</li>
<li><p><strong>一致性（Consistency）</strong>，事务执行的结果必须是使数据库从一个一致性状态变到另一个一致性状态。如果数据库系统运行中发生故障，有些事务尚未完成就被迫中断，这些未完成的事务对数据库所做的修改有一部分已经写入物理数据库，这时数据库就处于不一致的状态。一致性与原子性密切相关。</p>
</li>
<li><p><strong>隔离性（Isolation）</strong>，一个事务的执行不能被其他事务干扰。</p>
</li>
<li><p><strong>持续性（Durability）</strong>，一个事务一旦提交，它对数据库中数据的改变就是永久性的，</p>
</li>
</ul>
<h2 id="5-并发控制"><a href="#5-并发控制" class="headerlink" title="5. 并发控制"></a>5. 并发控制</h2><p>事务是并发控制的基本单位，并发控制的目的即保证事务的<strong>隔离性和一致性</strong>。</p>
<p>并发控制的主要技术有：<strong>封锁（locking）</strong>、<strong>时间戳（timestamp）</strong>、<strong>乐观控制法（optimistic scheduler）</strong>和<strong>多版本并发控制（MVCC）</strong>。</p>
<p>其中，主要讲解基本的封锁方法。</p>
<h3 id="5-1-并发操作可能产生的问题"><a href="#5-1-并发操作可能产生的问题" class="headerlink" title="5.1. 并发操作可能产生的问题"></a>5.1. 并发操作可能产生的问题</h3><ul>
<li><p><strong>丢失修改（lost update，写与写冲突）</strong>：两个事务T1和T2读入同一个数据并修改，T2提交的结果破坏了T1提交的结果，导致T1的修改被丢失。</p>
</li>
<li><p><strong>脏读（dirty read，读到未提交写）</strong>：事务T1修改某一数据并将其写回磁盘，事务T2读取同一数据后，T1由于某种原因被撤销，此时T1修改过的数据恢复原值，T2读到的数据就与数据库中的数据不一致，为“脏数据”。</p>
</li>
<li><p><strong>不可重复读（non-repeatable）</strong>：</p>
<ol>
<li>事务T1读取某一数据后，T2对其进行<strong>修改</strong>，当T1再次都该数据时，得到与前一次不同的值。</li>
<li>事务T1按一定条件从数据库中读取了某些数据记录后，T2<strong>删除</strong>了其中部分记录，当T1再次读取时，发现某些记录神秘地消失了。</li>
<li>事务T1按一定条件从数据库中读取了某些数据记录后，T2<strong>插入</strong>了一些记录，当T1再次读取时，发现多了一些数据。</li>
</ol>
<ul>
<li>后两种不可重复读也被称为<strong>幻影（phantom row）现象&#x2F;幻读</strong>。</li>
</ul>
</li>
</ul>
<p>示例：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/21.png" alt="1"></p>
<h3 id="5-2-封锁"><a href="#5-2-封锁" class="headerlink" title="5.2. 封锁"></a>5.2. 封锁</h3><p>封锁就是：在对某个数据对象操作之前，先对其加锁。</p>
<p>主要有两种锁：</p>
<ul>
<li><strong>排他锁（X锁，写锁）</strong></li>
<li><strong>共享锁（S锁，读锁）</strong></li>
</ul>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/22.png" alt="1"></p>
<h3 id="5-3-封锁协议"><a href="#5-3-封锁协议" class="headerlink" title="5.3. 封锁协议"></a>5.3. 封锁协议</h3><p>运用X锁和S锁时，还需约定一些规则，例如：何时申请X锁或S锁、持锁时间、何时释放等，这些规则称为<strong>封锁协议（locking protocol）</strong>。</p>
<h4 id="5-3-1-一级封锁协议"><a href="#5-3-1-一级封锁协议" class="headerlink" title="5.3.1. 一级封锁协议"></a>5.3.1. 一级封锁协议</h4><p><strong>事务T在修改数据R之前必须对其加X锁，直到事务结束才释放</strong>。</p>
<p>一级封锁协议可<strong>防止丢失修改</strong>；但由于读数据不加锁，则<strong>不能保证脏读和可重复读</strong>。</p>
<h4 id="5-3-2-二级封锁协议"><a href="#5-3-2-二级封锁协议" class="headerlink" title="5.3.2. 二级封锁协议"></a>5.3.2. 二级封锁协议</h4><p><strong>在一级封锁协议的基础上，增加事务T在读取数据R之前必须先对其加S锁，读完后即可释放S锁</strong>。</p>
<p>二级封锁协议<strong>防止了丢失修复和脏读</strong>，但<strong>不能保证不可重复读</strong>。</p>
<h4 id="5-3-3-三级封锁协议"><a href="#5-3-3-三级封锁协议" class="headerlink" title="5.3.3. 三级封锁协议"></a>5.3.3. 三级封锁协议</h4><p><strong>在一级封锁协议的基础上，增加事务T在读取数据R之前必须先对其加S锁，直到事务结束才可释放S锁</strong>。</p>
<p>三级封锁协议<strong>防止了丢失修复、脏读和不可重复读</strong>。</p>
<h4 id="5-3-4-不同级别的封锁协议和一致性保证"><a href="#5-3-4-不同级别的封锁协议和一致性保证" class="headerlink" title="5.3.4. 不同级别的封锁协议和一致性保证"></a>5.3.4. 不同级别的封锁协议和一致性保证</h4><p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/23.png" alt="1"></p>
<h3 id="5-4-并发调度的可串行性"><a href="#5-4-并发调度的可串行性" class="headerlink" title="5.4. 并发调度的可串行性"></a>5.4. 并发调度的可串行性</h3><p>由于数据库事务是并发的，所以不同的事务调度可能会产生不同的结果，比如：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/24.png" alt="1"></p>
<p>那么什么样的调度是正确的呢？显然，<strong>串行调度</strong>是正确的，执行结果等价于串行调度结果的调度也是正确的，这样的调度叫做<strong>可串行化调度</strong>。</p>
<p>那么又如何判断一个调度是否为可串行化调度呢？</p>
<p>首先，需要引出：<strong>冲突操作</strong>是指不同事务对同一个数据的读写和写写操作，如下：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/25.png" alt="1"></p>
<p>在一个调度中，<strong>不同事务的冲突操作</strong>和<strong>同一事务的两个操作</strong>是不能交换的。</p>
<p>如果一个调度Sc，通过<strong>交换两个事务不冲突操作的次序</strong>，得到另一个调度Sc1，且Sc1是串行的，则称Sc为<strong>冲突可串行化调度</strong>，即可串行化调度。</p>
<p>举例：</p>
<p><img src="/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%B0%8F%E8%AE%B0/26.png" alt="1"></p>
<h3 id="5-5-两段锁协议"><a href="#5-5-两段锁协议" class="headerlink" title="5.5. 两段锁协议"></a>5.5. 两段锁协议</h3><p>为了保证并发调度的正确性，数据库采用 <strong>两段锁协议（2PL）</strong> 实现并发调度的可串行性。</p>
<p>所谓两段锁，是指事务分为两个阶段：</p>
<ul>
<li><strong>第一阶段获得封锁，事务可以申请获得任何数据上的任何类型锁，但不能释放任何锁</strong>；</li>
<li><strong>第二阶段释放封锁，事务可以释放任何数据上的任何锁，但是不能再申请锁</strong>。</li>
</ul>
<p>事务遵守两段锁协议是可串行化调度的充分条件。</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/DataBase/" rel="tag"><i class="fa fa-tag"></i> 数据库</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/grpc%E5%85%A5%E9%97%A8.html" rel="prev" title="grpc 入门">
                  <i class="fa fa-chevron-left"></i> grpc 入门
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/%E3%80%8A%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E3%80%8B%E7%AC%94%E8%AE%B0-%E7%AC%AC4-5%E7%AB%A0%E7%BD%91%E7%BB%9C%E5%B1%82.html" rel="next" title="《计算机网络》笔记-第4/5章网络层">
                  《计算机网络》笔记-第4/5章网络层 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">dounine</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/mist/" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

    </div>
  </footer>

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>





  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.7.2/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"99MyCql","repo":"99MyCql.github.io","client_id":"7c69ea063e9c78a72075","client_secret":"f222b18af36b2dffda7884ce5fd77bbb9172de54","admin_user":"99MyCql","distraction_free_mode":false,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"zh-CN","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.7.2/gitalk.min.js","integrity":"sha256-Pmj85ojLaPOWwRtlMJwmezB/Qg8BzvJp5eTzvXaYAfA="},"path_md5":"88892ef942d124c04d13e2b574854353"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>
</html>
